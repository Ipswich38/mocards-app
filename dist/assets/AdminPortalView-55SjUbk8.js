import{c as is,u as cs,j as e,P as _,A as fe,e as O,f as M,t as C,b as x,a as h}from"./index-DsRBCEo3.js";import{r as d}from"./charts-sad3owxz.js";import{u as ds}from"./useAutoRefresh-pi1QPlKv.js";import{d as G,b as q,c as k,g as os,e as ms,a as xs}from"./data-BYr2Jk0h.js";import{S as re,F as ie,U as hs,v as ye,a as Ce,u as we,J as X,Z as us,r as Y,K as ke,N as Ae,O as gs,b as Pe,X as H,Q as ps,s as Se,P as Ee,q as js,x as Z,y as K,C as De,p as Ns,V as vs,w as Ie,Y as bs,E as fs}from"./icons-Dn_uH5YA.js";import"./vendor-N--QU9DW.js";import"./database-BUiByx9r.js";function Es(){const{isAuthenticated:Q,login:Fe,logout:Te}=is();ds({enabled:!0,showNotifications:!0});const[E,ce]=d.useState({username:"",password:""}),[A,Re]=d.useState("generator"),[i,P]=d.useState({mode:"single",region:"",areaCode:"",customAreaCode:"",startId:"",endId:"",perksTotal:5}),[c,g]=d.useState({showModal:!1,editingPerk:null,form:{type:"dental_cleaning",name:"",description:"",value:0,isActive:!0,validFor:365,requiresApproval:!1}}),[J,$e]=d.useState(""),[f,de]=d.useState(null),[p,z]=d.useState({clinicId:"",startRange:"",endRange:""}),[l,u]=d.useState({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",address:"",adminClinic:"",email:"",contactNumber:"",password:""}),[oe,D]=d.useState(!1),[I,U]=d.useState(null),[F,Me]=d.useState([]),[qe,W]=d.useState(!1),[o,N]=d.useState({cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"",perkRequested:"",clinicId:"",adminNotes:""}),[me,ee]=d.useState(!1),[v,B]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[se,Ue]=d.useState({username:"admin",password:"admin123"}),[L,xe]=d.useState("cards"),[Le,ae]=d.useState(null),[T,Oe]=d.useState(""),[b,he]=d.useState([]),[S,ue]=d.useState([]),[te,ge]=d.useState([]),[Ge,pe]=d.useState(!0),[le,Be]=d.useState("all"),[ne,Ve]=d.useState(null),[m,R]=d.useState({fullName:"",status:"inactive",perksTotal:5,perksUsed:0,clinicId:"",expiryDate:"",notes:""}),[y,V]=d.useState({name:"",region:"",plan:"starter",address:"",adminClinic:"",email:"",contactNumber:"",password:""}),{addToast:r}=cs();d.useEffect(()=>{(async()=>await G.initializeDefaults())()},[]),d.useEffect(()=>{Q&&(async()=>{try{pe(!0);const[t,n,a]=await Promise.all([q.getAll(),k.getAll(),G.getAll()]);he(t),ue(n),ge(a)}catch(t){console.error("Failed to load data:",t),r(x("Error","Failed to load data"))}finally{pe(!1)}})()},[Q]);const $=async()=>{try{const[s,t,n]=await Promise.all([q.getAll(),k.getAll(),G.getAll()]);he(s),ue(t),ge(n)}catch(s){console.error("Failed to reload data:",s),r(x("Error","Failed to reload data"))}},_e=s=>{s.preventDefault(),E.username==="admin"&&E.password==="admin123"?(Fe("admin",{username:E.username}),r(h("Welcome","Admin access granted"))):r(x("Login Failed","Invalid credentials"))},Xe=s=>{if(s.preventDefault(),v.currentPassword!==se.password){r(x("Invalid Password","Current password is incorrect"));return}if(v.newPassword.length<8){r(x("Password Too Short","New password must be at least 8 characters long"));return}if(v.newPassword!==v.confirmPassword){r(x("Passwords Do Not Match","Please confirm your new password correctly"));return}Ue({...se,password:v.newPassword}),B({currentPassword:"",newPassword:"",confirmPassword:""}),ee(!1),r(h("Password Changed","Admin password has been updated successfully"))},He=async()=>{if(i.mode==="single"){if(!i.region||!i.areaCode){r(C("Missing Fields","Please fill all required fields"));return}let s=i.areaCode;i.areaCode==="Custom"&&i.customAreaCode&&(s=i.customAreaCode);const t=b.length+1,n=os(t,i.region,s),a={controlNumber:n,fullName:"",status:"inactive",perksTotal:i.perksTotal,perksUsed:0,clinicId:"",expiryDate:"2025-12-31"};try{console.log("[Admin] Attempting to create card:",a);const j=await q.create(a);console.log("[Admin] Card created successfully:",j),r(h("Card Generated",`Created ${n} with ${i.perksTotal} perks`)),await $()}catch(j){console.error("[Admin] Card creation failed:",j),r(x("Card Creation Failed",`Failed to create card ${n}. Error: ${j instanceof Error?j.message:"Unknown error"}`))}}else{const s=parseInt(i.startId),t=parseInt(i.endId);if(!s||!t||s>t){r(C("Invalid Range","Please enter a valid ID range"));return}let n=i.areaCode;i.areaCode==="Custom"&&i.customAreaCode&&(n=i.customAreaCode);try{console.log("[Admin] Attempting batch creation:",{start:s,end:t,region:i.region,areaCode:n});const a=await q.createBatch(s,t,i.region,n,i.perksTotal);console.log("[Admin] Batch created successfully:",a),r(h("Batch Generated",`Created ${a.length} cards with ${i.perksTotal} perks each`)),await $()}catch(a){console.error("[Admin] Batch creation failed:",a),r(x("Batch Creation Failed",`Failed to create cards. Error: ${a instanceof Error?a.message:"Unknown error"}`))}}},ze=async()=>{if(!c.form.name||!c.form.description){r(C("Missing Fields","Please fill all required fields"));return}c.editingPerk?(await G.update(c.editingPerk.id,c.form),r(h("Perk Updated",`Updated ${c.form.name}`))):(await G.create(c.form),r(h("Perk Created",`Created ${c.form.name}`))),await $(),g({showModal:!1,editingPerk:null,form:{type:"dental_cleaning",name:"",description:"",value:0,isActive:!0,validFor:365,requiresApproval:!1}})},We=s=>{g({showModal:!0,editingPerk:s,form:{type:s.type,name:s.name,description:s.description,value:s.value,isActive:s.isActive,validFor:s.validFor,requiresApproval:s.requiresApproval}})},Ye=async s=>{await G.delete(s.id),r(h("Perk Deleted",`Deleted ${s.name}`)),await $()},Ze=[{value:"dental_cleaning",label:"Dental Cleaning"},{value:"consultation",label:"Consultation"},{value:"xray",label:"X-Ray"},{value:"treatment",label:"Treatment"},{value:"discount",label:"Discount"}],Ke=()=>{if(!J.trim())return;const s=b.find(t=>t.controlNumber===J);de(s||null),s||r(C("Card Not Found","No card found with this number"))},Qe=async()=>{if(!f)return;const s=f.status==="active"?"inactive":"active";await q.updateStatus(f.controlNumber,s)&&(de({...f,status:s}),r(h("Status Updated",`Card is now ${s}`)))},Je=async()=>{if(!p.clinicId||!p.startRange||!p.endRange){r(C("Missing Fields","Please fill all fields"));return}const s=await k.getById(p.clinicId);if(!s){r(x("Invalid Clinic","Clinic not found"));return}const n=b.filter(w=>w.controlNumber>=p.startRange&&w.controlNumber<=p.endRange&&!w.clinicId);if(n.length===0){r(C("No Cards","No unassigned cards found in this range"));return}const a=await k.getAssignedCardsCount(s.id),j=M[s.plan];if(a+n.length>j){r(x("Plan Limit Exceeded",`This would exceed the ${s.plan} plan limit of ${j} cards. Current: ${a}`));return}await q.assignToClinic(n.map(w=>w.controlNumber),s.id)&&(r(h("Cards Assigned",`Assigned ${n.length} cards to ${s.name}`)),z({clinicId:"",startRange:"",endRange:""}))},es=async()=>{if(!l.name||!l.region||!l.plan||!l.areaCode||!l.password){r(C("Missing Required Fields","Please fill all required fields"));return}let s=l.areaCode;l.areaCode==="Custom"&&l.customAreaCode&&(s=l.customAreaCode);const t=await ms(s);try{const n={name:l.name,region:l.region,plan:l.plan,code:t,address:l.address||void 0,adminClinic:l.adminClinic||void 0,email:l.email||void 0,contactNumber:l.contactNumber||void 0,password:l.password,subscriptionPrice:O[l.plan]},a=await k.create(n);r(h("Clinic Created",`${a.name} created successfully with code ${a.code}`)),u({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",address:"",adminClinic:"",email:"",contactNumber:"",password:""}),await $()}catch{r(x("Creation Failed","Failed to create clinic"))}},je=s=>{U(s),u({name:s.name,region:s.region,plan:s.plan,areaCode:s.code.substring(0,3),customAreaCode:"",address:s.address||"",adminClinic:s.adminClinic||"",email:s.email||"",contactNumber:s.contactNumber||"",password:""}),D(!0)},Ne=async()=>{if(I){if(!l.name||!l.region||!l.plan){r(C("Missing Required Fields","Please fill all required fields"));return}try{const s={name:l.name,region:l.region,plan:l.plan,address:l.address||void 0,adminClinic:l.adminClinic||void 0,email:l.email||void 0,contactNumber:l.contactNumber||void 0,maxCards:M[l.plan],updatedAt:new Date().toISOString()};l.password.trim()&&(s.password=l.password),await k.update(I.id,s)?(r(h("Clinic Updated",`${l.name} has been updated successfully`)),D(!1),U(null),u({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",password:"",address:"",adminClinic:"",email:"",contactNumber:""})):r(x("Update Failed","Could not update clinic"))}catch{r(x("Update Failed","Failed to update clinic"))}}},ve=async s=>{const t=await k.getById(s);if(!t)return;const n=await k.getAssignedCardsCount(s);if(n>0){r(C("Cannot Delete",`This clinic has ${n} assigned cards. Please reassign them first.`));return}if(confirm(`Are you sure you want to delete "${t.name}"? This action cannot be undone.`)){const a=await k.delete(s);r(a?h("Clinic Deleted",`${t.name} has been deleted`):x("Delete Failed","Could not delete clinic"))}},ss=async s=>{const t=new Date().toISOString(),n=await xs.create({cardControlNumber:s.cardControlNumber,clinicId:s.clinicId,patientName:s.patientName,patientEmail:s.patientEmail,patientPhone:s.patientPhone,preferredDate:s.preferredDate,preferredTime:s.preferredTime,status:"pending",serviceType:s.serviceType,notes:s.adminNotes,createdAt:t,updatedAt:t});Me(a=>[...a,n]),r(h("Manual Appointment Created","Appointment request sent to clinic for processing"))},as=s=>{const t=b.find(n=>n.controlNumber===s);t&&(R({fullName:t.fullName,status:t.status,perksTotal:t.perksTotal,perksUsed:t.perksUsed,clinicId:t.clinicId,expiryDate:t.expiryDate,notes:t.notes||""}),ae(s))},ts=async s=>{const t=b.find(n=>n.controlNumber===s);if(t)try{const n={fullName:m.fullName,status:m.status,perksTotal:m.perksTotal,perksUsed:m.perksUsed,clinicId:m.clinicId,expiryDate:m.expiryDate,notes:m.notes,updatedAt:new Date().toISOString()};Object.assign(t,n),ae(null),r(h("Card Updated",`Updated ${s} successfully`)),await $()}catch{r(x("Update Failed","Failed to update card"))}},ls=async s=>{if(window.confirm(`Are you sure you want to delete card ${s}? This action cannot be undone.`))try{await q.delete(s)?(r(h("Card Deleted",`Card ${s} has been deleted`)),await $()):r(x("Delete Failed","Could not delete card"))}catch{r(x("Delete Failed","Could not delete card"))}},ns=[{id:"generator",label:"Generator",icon:X,color:"emerald"},{id:"activation",label:"Activation",icon:us,color:"blue"},{id:"appointments",label:"Appointments",icon:Y,color:"rose"},{id:"clinic-management",label:"Manage Clinics",icon:ke,color:"indigo"},{id:"endorsement",label:"Endorsement",icon:Ae,color:"orange"},{id:"master-list",label:"Master List",icon:gs,color:"purple"},{id:"settings",label:"Settings",icon:we,color:"gray"}];if(!Q)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"light-card p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(re,{className:"h-8 w-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Access Required"}),e.jsx("p",{className:"text-gray-600",children:"Please authenticate to continue"})]}),e.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{type:"text",value:E.username,onChange:s=>ce({...E,username:s.target.value}),className:"light-input",placeholder:"Enter admin username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:E.password,onChange:s=>ce({...E,password:s.target.value}),className:"light-input",placeholder:"Enter admin password",required:!0})]}),e.jsx("button",{type:"submit",className:"light-button-primary w-full",children:"Access Admin Portal"})]})]})});const rs=[{label:"Total Cards",value:b.length,icon:ie,color:"blue"},{label:"Active Clinics",value:S.length,icon:hs,color:"green"},{label:"Active Cards",value:b.filter(s=>s.status==="active").length,icon:ye,color:"emerald"},{label:"Pending Cards",value:b.filter(s=>s.status==="inactive").length,icon:Ce,color:"yellow"}];return Ge?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"light-card p-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading admin data..."})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-2xl flex items-center justify-center",children:e.jsx(re,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Control Room"}),e.jsx("p",{className:"text-gray-600",children:"MOCARDS System Administration"})]})]}),e.jsxs("button",{onClick:Te,className:"light-button-secondary flex items-center space-x-2",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:rs.map((s,t)=>{const n=s.icon;return e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.value})]}),e.jsx("div",{className:`w-12 h-12 bg-${s.color}-100 rounded-2xl flex items-center justify-center`,children:e.jsx(n,{className:`h-6 w-6 text-${s.color}-600`})})]})},t)})}),e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl",children:ns.map(s=>{const t=s.icon,n=A===s.id;return e.jsxs("button",{onClick:()=>Re(s.id),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg transition-all duration-200 ${n?"light-tab-active":"light-tab"}`,children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.label})]},s.id)})})})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[A==="generator"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Card Generator"}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsx("button",{onClick:()=>P({...i,mode:"single"}),className:`px-4 py-2 rounded-md font-medium transition-colors ${i.mode==="single"?"bg-white text-gray-900 shadow-sm":"text-gray-600"}`,children:"Single Card"}),e.jsx("button",{onClick:()=>P({...i,mode:"batch"}),className:`px-4 py-2 rounded-md font-medium transition-colors ${i.mode==="batch"?"bg-white text-gray-900 shadow-sm":"text-gray-600"}`,children:"Batch Mode"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),e.jsxs("select",{value:i.region,onChange:s=>P({...i,region:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Region"}),_.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Code"}),e.jsxs("select",{value:i.areaCode,onChange:s=>P({...i,areaCode:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Area Code"}),fe.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),i.areaCode==="Custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Area Code"}),e.jsx("input",{type:"text",value:i.customAreaCode,onChange:s=>P({...i,customAreaCode:s.target.value}),className:"light-input",placeholder:"Enter custom area code (e.g., XYZ001)"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perks per Card"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",min:"1",max:"20",value:i.perksTotal,onChange:s=>P({...i,perksTotal:parseInt(s.target.value)||1}),className:"light-input w-20"}),e.jsx("span",{className:"text-sm text-gray-600",children:"benefits/perks per card"}),e.jsxs("button",{onClick:()=>g({...c,showModal:!0}),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:from-blue-700 hover:to-indigo-700 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Manage Perks"})]})]}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Available Perks: "}),te.filter(s=>s.isActive).length>0?e.jsx("span",{className:"text-green-600 font-medium",children:te.filter(s=>s.isActive).map(s=>s.name).join(", ")}):e.jsx("span",{className:"text-orange-600",children:"No active perks configured"})]})]}),i.mode==="batch"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start ID"}),e.jsx("input",{type:"number",value:i.startId,onChange:s=>P({...i,startId:s.target.value}),className:"light-input",placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End ID"}),e.jsx("input",{type:"number",value:i.endId,onChange:s=>P({...i,endId:s.target.value}),className:"light-input",placeholder:"100"})]})]})]}),e.jsx("button",{onClick:He,className:"light-button-primary",children:i.mode==="single"?"Generate Card":"Generate Batch"})]}),A==="activation"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Card Activation"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:J,onChange:s=>$e(s.target.value),className:"light-input",placeholder:"Enter control number to activate"})}),e.jsxs("button",{onClick:Ke,className:"light-button-primary",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Search"]})]}),f&&e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.fullName}),e.jsx("p",{className:"text-gray-600",children:f.controlNumber})]}),e.jsx("span",{className:f.status==="active"?"status-active":"status-inactive",children:f.status})]}),e.jsxs("button",{onClick:Qe,className:"light-button-primary",children:[f.status==="active"?"Deactivate":"Activate"," Card"]})]})]}),A==="clinic-management"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Manage Clinics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive clinic management with subscription plans and monitoring"})]}),e.jsxs("button",{onClick:()=>{D(!oe),U(null),u({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",address:"",adminClinic:"",email:"",contactNumber:"",password:""})},className:"light-button-primary flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Add New Clinic"]})]}),oe&&e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:I?`Edit Clinic: ${I.name}`:"Add New Clinic"}),e.jsx("button",{onClick:()=>{D(!1),U(null)},className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(H,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Clinic Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.name,onChange:s=>u({...l,name:s.target.value}),className:"light-input",placeholder:"Enter clinic name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Region ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l.region,onChange:s=>u({...l,region:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Region"}),_.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subscription Plan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l.plan,onChange:s=>u({...l,plan:s.target.value}),className:"light-select",children:[e.jsxs("option",{value:"starter",children:["Starter Plan - ₱",O.starter,"/month (up to ",M.starter," cards)"]}),e.jsxs("option",{value:"growth",children:["Growth Plan - ₱",O.growth,"/month (up to ",M.growth," cards)"]}),e.jsxs("option",{value:"pro",children:["Pro Plan - ₱",O.pro,"/month (up to ",M.pro," cards)"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Area Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l.areaCode,onChange:s=>u({...l,areaCode:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Area Code"}),fe.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),l.areaCode==="Custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Area Code"}),e.jsx("input",{type:"text",value:l.customAreaCode,onChange:s=>u({...l,customAreaCode:s.target.value}),className:"light-input",placeholder:"Enter custom area code (e.g., XYZ001)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Clinic Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:l.password,onChange:s=>u({...l,password:s.target.value}),className:"light-input",placeholder:"Enter clinic login password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),e.jsx("input",{type:"text",value:l.address,onChange:s=>u({...l,address:s.target.value}),className:"light-input",placeholder:"Enter clinic address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Contact (Optional)"}),e.jsx("input",{type:"text",value:l.adminClinic,onChange:s=>u({...l,adminClinic:s.target.value}),className:"light-input",placeholder:"Enter admin contact name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:l.email,onChange:s=>u({...l,email:s.target.value}),className:"light-input",placeholder:"Enter clinic email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number (Optional)"}),e.jsx("input",{type:"tel",value:l.contactNumber,onChange:s=>u({...l,contactNumber:s.target.value}),className:"light-input",placeholder:"+63917123456"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl mt-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Subscription Summary"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[l.plan.charAt(0).toUpperCase()+l.plan.slice(1)," Plan:"]})," ₱",O[l.plan]||0,"/month"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Card Limit:"})," Up to ",M[l.plan]||0," cards"]}),e.jsx("p",{className:"text-blue-600 mt-2",children:"* Required fields must be filled. Optional fields can be updated later."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{D(!1),U(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:I?Ne:es,className:"light-button-primary",children:I?"Update Clinic":"Create Clinic Profile"})]})]})}),e.jsx("div",{className:"light-card",children:e.jsx("div",{className:"p-6",children:S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ps,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Clinics Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first clinic to the system"}),e.jsxs("button",{onClick:()=>D(!0),className:"light-button-primary flex items-center gap-2 mx-auto",children:[e.jsx(X,{className:"h-4 w-4"}),"Add First Clinic"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Clinic Details"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Plan & Usage"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Contact Info"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:S.map(s=>{const t=b.filter(w=>w.clinicId===s.id),n=t.length,a=M[s.plan],j=n/a*100,be=_.find(w=>w.code===s.region)?.name||s.region;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600 font-mono",children:s.code}),e.jsx("div",{className:"text-sm text-gray-500",children:be})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.plan==="starter"?"bg-blue-100 text-blue-700":s.plan==="growth"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:s.plan.toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-600",children:["₱",O[s.plan],"/mo"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Card Usage"}),e.jsxs("span",{className:"font-medium",children:[n,"/",a]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${j>=90?"bg-red-500":j>=70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(j,100)}%`}})})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1 text-sm",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Se,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]}),s.contactNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:s.contactNumber})]}),s.adminClinic&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(js,{className:"h-3 w-3"}),e.jsx("span",{children:s.adminClinic})]}),!s.email&&!s.contactNumber&&!s.adminClinic&&e.jsx("span",{className:"text-gray-400 italic",children:"No contact info"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{je(s),D(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Edit clinic",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ve(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Delete clinic",disabled:t.length>0,children:e.jsx(K,{className:"h-4 w-4"})})]})})]},s.id)})})]})})})})]}),A==="appointments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Appointment Status Monitor"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View all appointment requests and their processing status"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{children:[F.length," total requests"]})]}),e.jsxs("button",{onClick:()=>W(!0),className:"light-button-primary flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Create Manual Appointment"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:F.filter(s=>s.status==="pending").length})]}),e.jsx(De,{className:"h-8 w-8 text-orange-600"})]})}),e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:F.filter(s=>s.status==="pending").length})]}),e.jsx(Ae,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Accepted"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:F.filter(s=>s.status==="accepted").length})]}),e.jsx(ye,{className:"h-8 w-8 text-emerald-600"})]})}),e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:F.filter(s=>s.status==="rejected").length})]}),e.jsx(Ce,{className:"h-8 w-8 text-red-600"})]})})]}),qe&&e.jsxs("div",{className:"light-card p-6 border-l-4 border-blue-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Manual Appointment"})]}),e.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(H,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Control Number *"}),e.jsx("input",{type:"text",value:o.cardControlNumber,onChange:s=>N({...o,cardControlNumber:s.target.value}),className:"light-input",placeholder:"MOC-00000-XX-XXX000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clinic *"}),e.jsxs("select",{value:o.clinicId,onChange:s=>N({...o,clinicId:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Clinic"}),S.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name *"}),e.jsx("input",{type:"text",value:o.patientName,onChange:s=>N({...o,patientName:s.target.value}),className:"light-input",placeholder:"Patient's full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:o.patientEmail,onChange:s=>N({...o,patientEmail:s.target.value}),className:"light-input",placeholder:"patient@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:o.patientPhone,onChange:s=>N({...o,patientPhone:s.target.value}),className:"light-input",placeholder:"+63917123456"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Type *"}),e.jsx("input",{type:"text",value:o.serviceType,onChange:s=>N({...o,serviceType:s.target.value}),className:"light-input",placeholder:"e.g., Dental Cleaning, Consultation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Date *"}),e.jsx("input",{type:"date",value:o.preferredDate,onChange:s=>N({...o,preferredDate:s.target.value}),min:new Date().toISOString().split("T")[0],className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Time *"}),e.jsx("input",{type:"time",value:o.preferredTime,onChange:s=>N({...o,preferredTime:s.target.value}),className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perk Requested"}),e.jsx("input",{type:"text",value:o.perkRequested,onChange:s=>N({...o,perkRequested:s.target.value}),className:"light-input",placeholder:"e.g., Free Dental Cleaning"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),e.jsx("textarea",{value:o.adminNotes,onChange:s=>N({...o,adminNotes:s.target.value}),rows:3,className:"light-input resize-none",placeholder:"Any additional notes or instructions..."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 mt-6",children:[e.jsxs("button",{onClick:()=>{if(!o.cardControlNumber||!o.patientName||!o.patientEmail||!o.preferredDate||!o.preferredTime||!o.serviceType||!o.clinicId){r(C("Missing Fields","Please fill in all required fields"));return}ss(o),N({cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"",perkRequested:"",clinicId:"",adminNotes:""}),W(!1)},className:"light-button-primary flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Send to Clinic"]}),e.jsx("button",{onClick:()=>W(!1),className:"light-button-secondary",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-4",children:F.length===0?e.jsxs("div",{className:"light-card p-8 text-center",children:[e.jsx(Y,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Appointment Requests"}),e.jsx("p",{className:"text-gray-600",children:"When cardholders request appointments, they will appear here."})]}):F.map(s=>e.jsx("div",{className:"light-card p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5 text-[#1A535C]"}),e.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:s.cardControlNumber})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="pending"?"bg-orange-100 text-orange-700":s.status==="accepted"?"bg-emerald-100 text-emerald-700":s.status==="rejected"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:s.status.replace(/_/g," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.patientName}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:s.patientEmail})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{children:s.patientPhone})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(s.preferredDate).toLocaleDateString("en-PH")}),e.jsx(De,{className:"h-4 w-4 ml-2"}),e.jsx("span",{children:s.preferredTime})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Service:"})," ",s.serviceType]}),s.perkRequested&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Perk:"})," ",s.perkRequested]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Clinic:"})," ",s.clinicName]})]})})]}),s.adminNotes&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Admin Notes:"})," ",s.adminNotes]})}),s.clinicNotes&&e.jsx("div",{className:"bg-green-50 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Clinic Response:"})," ",s.clinicNotes]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Requested: ",new Date(s.requestedAt).toLocaleString("en-PH")]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[e.jsxs("div",{children:["Sent to Clinic: ",new Date(s.forwardedAt).toLocaleString("en-PH")]}),s.processedAt&&e.jsxs("div",{children:["Processed: ",new Date(s.processedAt).toLocaleString("en-PH")]})]})})]})},s.id))})]}),A==="endorsement"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Card Endorsement"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clinic"}),e.jsxs("select",{value:p.clinicId,onChange:s=>z({...p,clinicId:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Clinic"}),S.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.plan,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Range"}),e.jsx("input",{type:"text",value:p.startRange,onChange:s=>z({...p,startRange:s.target.value}),className:"light-input",placeholder:"MOC-00001-NCR-CVT001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Range"}),e.jsx("input",{type:"text",value:p.endRange,onChange:s=>z({...p,endRange:s.target.value}),className:"light-input",placeholder:"MOC-00100-NCR-CVT001"})]})]}),e.jsx("button",{onClick:Je,className:"light-button-primary",children:"Assign Cards to Clinic"})]}),A==="master-list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Data Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>xe("cards"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${L==="cards"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(ie,{className:"h-4 w-4 inline mr-2"}),"Cards"]}),e.jsxs("button",{onClick:()=>xe("clinics"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${L==="clinics"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(ke,{className:"h-4 w-4 inline mr-2"}),"Clinics"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Pe,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:T,onChange:s=>Oe(s.target.value),placeholder:L==="cards"?"Search cards by name or control number...":"Search clinics by name or code...",className:"light-input pl-10"})]}),L==="cards"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:le,onChange:s=>Be(s.target.value),className:"light-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),L==="cards"&&e.jsx("div",{className:"light-table",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"light-table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4",children:"Control Number"}),e.jsx("th",{className:"text-left p-4",children:"Patient Name"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Clinic"}),e.jsx("th",{className:"text-left p-4",children:"Perks"}),e.jsx("th",{className:"text-left p-4",children:"Expiry"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:b.filter(s=>{const t=!T||s.fullName.toLowerCase().includes(T.toLowerCase())||s.controlNumber.toLowerCase().includes(T.toLowerCase()),n=le==="all"||s.status===le;return t&&n}).map(s=>{const t=S.find(a=>a.id===s.clinicId),n=Le===s.controlNumber;return e.jsxs("tr",{className:"light-table-row",children:[e.jsx("td",{className:"p-4 font-mono text-sm",children:s.controlNumber}),e.jsx("td",{className:"p-4",children:n?e.jsx("input",{type:"text",value:m.fullName,onChange:a=>R({...m,fullName:a.target.value}),className:"light-input text-sm"}):s.fullName}),e.jsx("td",{className:"p-4",children:n?e.jsxs("select",{value:m.status,onChange:a=>R({...m,status:a.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}):e.jsx("span",{className:s.status==="active"?"status-active":"status-inactive",children:s.status})}),e.jsx("td",{className:"p-4",children:n?e.jsxs("select",{value:m.clinicId,onChange:a=>R({...m,clinicId:a.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"",children:"Unassigned"}),S.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}):t?.name||"Unassigned"}),e.jsx("td",{className:"p-4",children:n?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",min:"0",value:m.perksUsed,onChange:a=>R({...m,perksUsed:parseInt(a.target.value)||0}),className:"light-input text-sm w-16"}),e.jsx("span",{className:"text-gray-500 self-center",children:"/"}),e.jsx("input",{type:"number",min:"1",value:m.perksTotal,onChange:a=>R({...m,perksTotal:parseInt(a.target.value)||1}),className:"light-input text-sm w-16"})]}):`${s.perksUsed}/${s.perksTotal}`}),e.jsx("td",{className:"p-4",children:n?e.jsx("input",{type:"date",value:m.expiryDate,onChange:a=>R({...m,expiryDate:a.target.value}),className:"light-input text-sm"}):new Date(s.expiryDate).toLocaleDateString()}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ts(s.controlNumber),className:"p-1 text-green-600 hover:text-green-700",title:"Save changes",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(null),className:"p-1 text-gray-600 hover:text-gray-700",title:"Cancel",children:e.jsx(H,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>as(s.controlNumber),className:"p-1 text-blue-600 hover:text-blue-700",title:"Edit card",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ls(s.controlNumber),className:"p-1 text-red-600 hover:text-red-700",title:"Delete card",children:e.jsx(K,{className:"h-4 w-4"})})]})})})]},s.controlNumber)})})]})}),L==="clinics"&&e.jsx("div",{className:"light-table",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"light-table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Code"}),e.jsx("th",{className:"text-left p-4",children:"Region"}),e.jsx("th",{className:"text-left p-4",children:"Plan"}),e.jsx("th",{className:"text-left p-4",children:"Cards"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:S.filter(s=>!T||s.name.toLowerCase().includes(T.toLowerCase())||s.code.toLowerCase().includes(T.toLowerCase())).map(s=>{const t=I?.id===s.id,n=b.filter(a=>a.clinicId===s.id);return e.jsxs("tr",{className:"light-table-row",children:[e.jsx("td",{className:"p-4",children:t?e.jsx("input",{type:"text",value:y.name,onChange:a=>V({...y,name:a.target.value}),className:"light-input text-sm"}):e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.address})]})}),e.jsx("td",{className:"p-4 font-mono text-sm",children:s.code}),e.jsx("td",{className:"p-4",children:t?e.jsxs("select",{value:y.region,onChange:a=>V({...y,region:a.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"",children:"Select Region"}),_.map(a=>e.jsx("option",{value:a.code,children:a.name},a.code))]}):_.find(a=>a.code===s.region)?.name||s.region}),e.jsx("td",{className:"p-4",children:t?e.jsxs("select",{value:y.plan,onChange:a=>V({...y,plan:a.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"pro",children:"Pro"})]}):e.jsx("span",{className:`plan-${s.plan} capitalize`,children:s.plan})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[n.length," / ",s.maxCards]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-blue-500 h-1 rounded-full",style:{width:`${Math.min(n.length/s.maxCards*100,100)}%`}})})]})}),e.jsx("td",{className:"p-4",children:t?e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{type:"email",value:y.email,onChange:a=>V({...y,email:a.target.value}),placeholder:"Email",className:"light-input text-sm"}),e.jsx("input",{type:"text",value:y.contactNumber,onChange:a=>V({...y,contactNumber:a.target.value}),placeholder:"Phone",className:"light-input text-sm"})]}):e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.email}),e.jsx("div",{className:"text-gray-500",children:s.contactNumber})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:s.isActive?"status-active":"status-inactive",children:s.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Ne(),className:"p-1 text-green-600 hover:text-green-700",title:"Save changes",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>U(null),className:"p-1 text-gray-600 hover:text-gray-700",title:"Cancel",children:e.jsx(H,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>je(s),className:"p-1 text-blue-600 hover:text-blue-700",title:"Edit clinic",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ve(ne===s.id?null:s.id),className:"p-1 text-amber-600 hover:text-amber-700",title:"Show/Hide Credentials (Emergency Access)",children:ne===s.id?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(fs,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ve(s.id),className:"p-1 text-red-600 hover:text-red-700",title:"Delete clinic",children:e.jsx(K,{className:"h-4 w-4"})})]})}),ne===s.id&&e.jsxs("div",{className:"mt-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(re,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-semibold text-amber-800",children:"Emergency Credentials"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Clinic Code:"}),e.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded border text-gray-900",children:s.code})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded border text-gray-900",children:s.password})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-amber-100 rounded text-xs text-amber-800",children:["⚠️ ",e.jsx("strong",{children:"Emergency Use Only:"})," Only provide these credentials to clinic staff who have forgotten their login details. Keep this information secure."]})]})]})]},s.id)})})]})})]}),A==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Password Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Change your admin password for security"})]}),e.jsx("button",{onClick:()=>ee(!me),className:"light-button-primary",children:"Change Password"})]}),me&&e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("form",{onSubmit:Xe,className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",value:v.currentPassword,onChange:s=>B({...v,currentPassword:s.target.value}),className:"light-input",placeholder:"Enter current password",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:v.newPassword,onChange:s=>B({...v,newPassword:s.target.value}),className:"light-input",placeholder:"Enter new password (min 8 characters)",minLength:8,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:v.confirmPassword,onChange:s=>B({...v,confirmPassword:s.target.value}),className:"light-input",placeholder:"Confirm new password",required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"light-button-primary",children:"Update Password"}),e.jsx("button",{type:"button",onClick:()=>{ee(!1),B({currentPassword:"",newPassword:"",confirmPassword:""})},className:"light-button-secondary",children:"Cancel"})]})]})})]})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Version:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"MOCARDS v3.0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Environment:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Production"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Last Login:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date().toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Admin Username:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:se.username})]})]})]})})]})]})}),c.showModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.editingPerk?"Edit Perk":"Create New Perk"}),e.jsx("button",{onClick:()=>g({...c,showModal:!1}),className:"text-gray-500 hover:text-gray-700",children:e.jsx(H,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),ze()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("select",{value:c.form.type,onChange:s=>g({...c,form:{...c.form,type:s.target.value}}),className:"light-select",children:Ze.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:c.form.name,onChange:s=>g({...c,form:{...c.form,name:s.target.value}}),className:"light-input",placeholder:"e.g., Free Dental Cleaning",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:c.form.description,onChange:s=>g({...c,form:{...c.form,description:s.target.value}}),className:"light-input",placeholder:"Describe this perk...",rows:3,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:c.form.value,onChange:s=>g({...c,form:{...c.form,value:parseInt(s.target.value)||0}}),className:"light-input",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Days"}),e.jsx("input",{type:"number",min:"1",value:c.form.validFor,onChange:s=>g({...c,form:{...c.form,validFor:parseInt(s.target.value)||365}}),className:"light-input",placeholder:"365"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.form.isActive,onChange:s=>g({...c,form:{...c.form,isActive:s.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.form.requiresApproval,onChange:s=>g({...c,form:{...c.form,requiresApproval:s.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Requires Approval"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"submit",className:"light-button-primary",children:c.editingPerk?"Update":"Create"}),e.jsx("button",{type:"button",onClick:()=>g({...c,showModal:!1}),className:"light-button-secondary",children:"Cancel"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Existing Perks"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:te.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("span",{className:`ml-2 text-xs px-2 py-1 rounded ${s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>We(s),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ye(s),className:"text-red-600 hover:text-red-800",children:e.jsx(K,{className:"h-4 w-4"})})]})]},s.id))})]})]})})]})}export{Es as AdminPortalView};
