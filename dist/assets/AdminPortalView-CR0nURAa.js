import{j as e,s as Q,u as xs,P as se,A as Fe,d as J,e as V,t as I,b as g,a as v,f as hs}from"./index-D40kGjU7.js";import{r as d}from"./charts-sad3owxz.js";import{u as us,b as U,c as F,d as Y,g as gs,a as ps}from"./data-B-3qzCz6.js";import{y as fe,b as ye,a as re,r as Ce,S as be,z as ve,U as js,t as Re,F as ae,Z as Ns,q as ce,J as qe,K as Ue,X as te,N as bs,O as Le,P as Me,p as vs,v as de,w as oe,C as $e,Q as fs,V as ys,u as Oe,Y as Cs,E as ws}from"./icons-DSdcywBl.js";import"./vendor-N--QU9DW.js";import"./database-BUiByx9r.js";const As=900*1e3,B="mocards_auth_session",le="mocards_last_activity",ks=()=>{const[C,w]=d.useState(!1),[m,p]=d.useState(null),S=d.useCallback(()=>{const n=Date.now();if(localStorage.setItem(le,n.toString()),m){const h={...m,lastActivity:n};p(h),localStorage.setItem(B,JSON.stringify(h))}},[m]),N=d.useCallback(n=>Date.now()-n.lastActivity<As,[]),K=d.useCallback((n,h)=>{const r=Date.now(),o={type:n,username:h.username||h.code,clinicId:h.id,clinicCode:h.code,loginTime:r,lastActivity:r};p(o),w(!0),localStorage.setItem(B,JSON.stringify(o)),localStorage.setItem(le,r.toString()),window.dispatchEvent(new CustomEvent("auth-state-change",{detail:{type:"login",user:o}}))},[]),f=d.useCallback(()=>{p(null),w(!1),localStorage.removeItem(B),localStorage.removeItem(le),window.dispatchEvent(new CustomEvent("auth-state-change",{detail:{type:"logout"}}))},[]);return d.useEffect(()=>{(()=>{try{const o=localStorage.getItem(B);if(o){const u=JSON.parse(o);N(u)?(p(u),w(!0),S()):(localStorage.removeItem(B),localStorage.removeItem(le))}}catch(o){console.error("Error checking session:",o),localStorage.removeItem(B),localStorage.removeItem(le)}})();const h=o=>{const{type:u,user:H}=o.detail;u==="login"&&H?(p(H),w(!0)):u==="logout"&&(p(null),w(!1))},r=o=>{if(o.key===B)if(o.newValue)try{const u=JSON.parse(o.newValue);N(u)&&(p(u),w(!0))}catch(u){console.error("Error parsing stored user data:",u)}else p(null),w(!1)};return window.addEventListener("auth-state-change",h),window.addEventListener("storage",r),()=>{window.removeEventListener("auth-state-change",h),window.removeEventListener("storage",r)}},[N,S]),d.useEffect(()=>{if(!C||!m)return;const h=setInterval(()=>{m&&!N(m)&&f()},60*1e3);return()=>clearInterval(h)},[C,m,N,f]),d.useEffect(()=>{if(!C)return;const n=["mousedown","mousemove","keypress","scroll","touchstart","click"],h=()=>{S()};let r;const o=()=>{clearTimeout(r),r=setTimeout(h,1e3)};return n.forEach(u=>{document.addEventListener(u,o,!0)}),()=>{clearTimeout(r),n.forEach(u=>{document.removeEventListener(u,o,!0)})}},[C,S]),{isAuthenticated:C,user:m,login:K,logout:f,updateActivity:S}};function Ss(){const[C,w]=d.useState(!1),[m,p]=d.useState(null),[S,N]=d.useState(null),K=async()=>{w(!0),N(null),p(null);try{console.log("[DEBUG] Starting database analysis...");const{data:f,error:n}=await Q.from("information_schema.columns").select("*").eq("table_name","cards").eq("table_schema","public"),{data:h,error:r}=await Q.from("cards").select("*").limit(10),{count:o,error:u}=await Q.from("cards").select("*",{count:"exact",head:!0}),{data:H,error:A}=await Q.from("cards").select("*").limit(5),W={tableStructure:{data:f,error:n},sampleCards:{data:h,error:r},totalCards:{count:o,error:u},testSearch:{data:H,error:A},timestamp:new Date().toISOString()};console.log("[DEBUG] Complete database analysis:",W),p(W)}catch(f){const n=f instanceof Error?f.message:"Unknown error";console.error("[DEBUG] Database check failed:",f),N(n)}finally{w(!1)}};return e.jsxs("div",{className:"light-card p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(fe,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Database Debugger"})]}),e.jsx("button",{onClick:K,disabled:C,className:"light-button-primary flex items-center space-x-2 mb-6",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Analyzing Database..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Run Database Analysis"})]})}),S&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-red-800 font-medium",children:"Database Error"})]}),e.jsx("p",{className:"text-red-700 mt-2",children:S})]}),m&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(Ce,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Database Analysis Complete"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Cards Table Structure"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.tableStructure.error?e.jsxs("p",{className:"text-red-600",children:["Error: ",m.tableStructure.error.message]}):e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Found ",m.tableStructure.data?.length||0," columns in cards table"]}),m.tableStructure.data&&m.tableStructure.data.length>0&&e.jsx("div",{className:"text-xs font-mono",children:m.tableStructure.data.map((f,n)=>e.jsxs("div",{className:"text-gray-700",children:[f.column_name,": ",f.data_type]},n))})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Total Cards"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.totalCards.error?e.jsxs("p",{className:"text-red-600",children:["Error: ",m.totalCards.error.message]}):e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[m.totalCards.count," cards"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Sample Cards Data"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-64 overflow-y-auto",children:m.sampleCards.error?e.jsxs("p",{className:"text-red-600",children:["Error: ",m.sampleCards.error.message]}):e.jsx("pre",{className:"text-xs font-mono text-gray-700 whitespace-pre-wrap",children:JSON.stringify(m.sampleCards.data,null,2)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Basic Query Test"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.testSearch.error?e.jsxs("p",{className:"text-red-600",children:["Error: ",m.testSearch.error.message]}):e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Query returned ",m.testSearch.data?.length||0," cards"]}),m.testSearch.data&&m.testSearch.data.length>0&&e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"First card control_number:"}),e.jsx("p",{className:"font-mono text-blue-600",children:m.testSearch.data[0]?.control_number||"No control_number field"})]})]})})]}),e.jsxs("details",{className:"border border-gray-200 rounded-lg",children:[e.jsx("summary",{className:"p-4 cursor-pointer font-medium",children:"View Raw Results"}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("pre",{className:"text-xs font-mono text-gray-600 whitespace-pre-wrap overflow-x-auto",children:JSON.stringify(m,null,2)})})]})]})]})}function Rs(){const{isAuthenticated:C,login:w,logout:m}=ks();us({enabled:!0,showNotifications:!0});const[p,S]=d.useState({username:"",password:""}),[N,K]=d.useState("generator"),f=async()=>{try{console.log("[Admin Debug] Testing database connection..."),c(I("Database Test","Testing database connection..."));const s=await U.getAll();console.log("[Admin Debug] Cards retrieved:",s);const a={controlNumber:`TEST-${Date.now()}`,fullName:"Test Card",status:"inactive",perksTotal:1,perksUsed:0,clinicId:"",expiryDate:"2025-12-31"};console.log("[Admin Debug] Attempting to create test card:",a);const i=await U.create(a);console.log("[Admin Debug] Test card created successfully:",i),c(v("Database Test Passed","Database connection and card creation working correctly!")),await R()}catch(s){console.error("[Admin Debug] Database test failed:",s),c(g("Database Test Failed",`Error: ${s instanceof Error?s.message:"Unknown error"}`))}},[n,h]=d.useState({quantity:1,region:"",areaCode:"",customAreaCode:"",perksTotal:5}),[r,o]=d.useState({showModal:!1,editingPerk:null,form:{type:"dental_cleaning",name:"",description:"",value:800,isActive:!0,validFor:365,requiresApproval:!1}}),[u,H]=d.useState(""),[A,W]=d.useState(null),[k,ne]=d.useState({clinicId:"",startRange:"",endRange:""}),[t,b]=d.useState({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",address:"",adminClinic:"",email:"",contactNumber:"",password:"",username:""}),[we,M]=d.useState(!1),[$,X]=d.useState(null),[O,_e]=d.useState([]),[Ge,ie]=d.useState(!1),[x,P]=d.useState({cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"",perkRequested:"",clinicId:"",adminNotes:""}),[Ae,me]=d.useState(!1),[E,Z]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[xe,Ve]=d.useState({username:"admin",password:"admin123"}),[z,ke]=d.useState("cards"),[Be,he]=d.useState(null),[_,He]=d.useState(""),[D,ue]=d.useState([]),[L,ge]=d.useState([]),[pe,Se]=d.useState([]),[Xe,Pe]=d.useState(!0),[je,ze]=d.useState("all"),[Ne,Je]=d.useState(null),[j,G]=d.useState({fullName:"",status:"inactive",perksTotal:5,perksUsed:0,clinicId:"",expiryDate:"",notes:""}),[T,ee]=d.useState({name:"",region:"",plan:"starter",address:"",adminClinic:"",email:"",contactNumber:"",password:""}),{addToast:c}=xs();d.useEffect(()=>{(async()=>await Y.initializeDefaults())()},[]),d.useEffect(()=>{const s=async()=>{try{Pe(!0);const[a,i,l]=await Promise.all([U.getAll(),F.getAll(),Y.getAll()]);ue(a),ge(i),Se(l)}catch(a){console.error("Failed to load data:",a),c(g("Error","Failed to load data"))}finally{Pe(!1)}};if(C){s();const a=Q.channel("admin-cards-changes").on("postgres_changes",{event:"*",schema:"public",table:"cards"},async l=>{console.log("[Admin] Real-time cards change detected:",l);try{const y=await U.getAll();ue(y)}catch(y){console.error("Failed to reload cards after real-time update:",y)}}).subscribe(),i=Q.channel("admin-clinics-changes").on("postgres_changes",{event:"*",schema:"public",table:"clinics"},async l=>{console.log("[Admin] Real-time clinics change detected:",l);try{const y=await F.getAll();ge(y)}catch(y){console.error("Failed to reload clinics after real-time update:",y)}}).subscribe();return()=>{a.unsubscribe(),i.unsubscribe()}}},[C]);const R=async()=>{try{const[s,a,i]=await Promise.all([U.getAll(),F.getAll(),Y.getAll()]);ue(s),ge(a),Se(i)}catch(s){console.error("Failed to reload data:",s),c(g("Error","Failed to reload data"))}},Ye=s=>{s.preventDefault(),p.username==="admin"&&p.password==="admin123"?(w("admin",{username:p.username}),c(v("Welcome","Admin access granted"))):c(g("Login Failed","Invalid credentials"))},Qe=s=>{if(s.preventDefault(),E.currentPassword!==xe.password){c(g("Invalid Password","Current password is incorrect"));return}if(E.newPassword.length<8){c(g("Password Too Short","New password must be at least 8 characters long"));return}if(E.newPassword!==E.confirmPassword){c(g("Passwords Do Not Match","Please confirm your new password correctly"));return}Ve({...xe,password:E.newPassword}),Z({currentPassword:"",newPassword:"",confirmPassword:""}),me(!1),c(v("Password Changed","Admin password has been updated successfully"))},Ke=async()=>{if(!n.region||!n.areaCode){c(I("Missing Fields","Please fill all required fields"));return}let s=n.areaCode;n.areaCode==="Custom"&&n.customAreaCode&&(s=n.customAreaCode);try{console.log("[Admin] BEFORE Generation - Current cards count:",D.length),console.log("[Admin] Generating",n.quantity,"cards with region:",n.region,"areaCode:",s),console.log("[Admin] Generator form data:",{quantity:n.quantity,region:n.region,areaCode:s,perksTotal:n.perksTotal});const a=await U.generateCards(n.quantity,n.region,s,n.perksTotal);console.log("[Admin] Cards generated successfully:",a),console.log("[Admin] Generated cards count:",a.length),a.length===0?(console.error("[Admin] WARNING: No cards were created! Check the generator logs above for errors."),c(g("Generation Issue","No cards were created. Check the console for details and try again."))):c(v("Cards Generated",`Created ${a.length} cards with ${n.perksTotal} perks each`)),console.log("[Admin] Calling reloadData to refresh dashboard..."),await R(),console.log("[Admin] AFTER Generation - New cards count should be updated via reloadData")}catch(a){console.error("[Admin] Card generation failed with error:",a),a instanceof Error&&console.error("[Admin] Error details:",{name:a.name,message:a.message,stack:a.stack}),c(g("Generation Failed",a instanceof Error?a.message:"Failed to generate cards"))}},We=async()=>{if(!r.form.name||!r.form.description){c(I("Missing Fields","Please fill all required fields"));return}r.editingPerk?(await Y.update(r.editingPerk.id,r.form),c(v("Perk Updated",`Updated ${r.form.name}`))):(await Y.create(r.form),c(v("Perk Created",`Created ${r.form.name}`))),await R(),o({showModal:!1,editingPerk:null,form:{type:"dental_cleaning",name:"",description:"",value:800,isActive:!0,validFor:365,requiresApproval:!1}})},Ze=s=>{o({showModal:!0,editingPerk:s,form:{type:s.type,name:s.name,description:s.description,value:s.value,isActive:s.isActive,validFor:s.validFor,requiresApproval:s.requiresApproval}})},es=async s=>{await Y.delete(s.id),c(v("Perk Deleted",`Deleted ${s.name}`)),await R()},ss=[{value:"dental_cleaning",label:"Dental Cleaning"},{value:"consultation",label:"Consultation"},{value:"xray",label:"X-Ray"},{value:"treatment",label:"Treatment"},{value:"discount",label:"Discount"},{value:"extraction",label:"Tooth Extraction (Bunot)"},{value:"filling",label:"Tooth Filling (Pasta)"},{value:"fluoride",label:"Fluoride Treatment"},{value:"checkup",label:"Checkup/Unlimited"}],as=()=>{if(!u.trim())return;const s=D.find(a=>a.controlNumber===u);W(s||null),s||c(I("Card Not Found","No card found with this number"))},ts=async()=>{if(!A)return;const s=A.status==="active"?"inactive":"active";await U.updateStatus(A.controlNumber,s)?(W({...A,status:s}),c(v("Status Updated",`Card is now ${s}`)),await R()):c(g("Update Failed","Failed to update card status"))},ls=async()=>{if(!k.clinicId||!k.startRange||!k.endRange){c(I("Missing Fields","Please fill all fields"));return}const s=await F.getById(k.clinicId);if(!s){c(g("Invalid Clinic","Clinic not found"));return}const i=D.filter(q=>q.controlNumber>=k.startRange&&q.controlNumber<=k.endRange&&!q.clinicId);if(i.length===0){c(I("No Cards","No unassigned cards found in this range"));return}const l=await F.getAssignedCardsCount(s.id),y=V[s.plan];if(l+i.length>y){c(g("Plan Limit Exceeded",`This would exceed the ${s.plan} plan limit of ${y} cards. Current: ${l}`));return}await U.assignToClinic(i.map(q=>q.controlNumber),s.id)?(c(v("Cards Assigned",`Assigned ${i.length} cards to ${s.name}`)),ne({clinicId:"",startRange:"",endRange:""}),await R()):c(g("Assignment Failed","Failed to assign cards to clinic"))},rs=async()=>{if(!t.name||!t.username||!t.region||!t.plan||!t.areaCode||!t.password){c(I("Missing Required Fields","Please fill all required fields including username"));return}let s=t.areaCode;t.areaCode==="Custom"&&t.customAreaCode&&(s=t.customAreaCode);const a=await gs(s);try{const i={name:t.name,username:t.username,region:t.region,plan:t.plan,code:a,address:t.address||void 0,adminClinic:t.adminClinic||void 0,email:t.email||void 0,contactNumber:t.contactNumber||void 0,password:t.password,subscriptionPrice:J[t.plan]},l=await F.create(i);c(v("Clinic Created",`${l.name} created successfully with code ${l.code}`)),b({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",address:"",adminClinic:"",email:"",contactNumber:"",password:"",username:""}),await R()}catch{c(g("Creation Failed","Failed to create clinic"))}},Ee=s=>{X(s),b({name:s.name,region:s.region,plan:s.plan,areaCode:s.code.substring(0,3),customAreaCode:"",address:s.address||"",adminClinic:s.adminClinic||"",email:s.email||"",contactNumber:s.contactNumber||"",password:"",username:s.username||""}),M(!0)},De=async()=>{if($){if(!t.name||!t.region||!t.plan){c(I("Missing Required Fields","Please fill all required fields"));return}try{const s={name:t.name,username:t.username,region:t.region,plan:t.plan,address:t.address||void 0,adminClinic:t.adminClinic||void 0,email:t.email||void 0,contactNumber:t.contactNumber||void 0,maxCards:V[t.plan],updatedAt:new Date().toISOString()};t.password.trim()&&(s.password=t.password),await F.update($.id,s)?(c(v("Clinic Updated",`${t.name} has been updated successfully`)),M(!1),X(null),b({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",password:"",address:"",adminClinic:"",email:"",contactNumber:"",username:""})):c(g("Update Failed","Could not update clinic"))}catch{c(g("Update Failed","Failed to update clinic"))}}},Te=async s=>{const a=await F.getById(s);if(!a)return;const i=await F.getAssignedCardsCount(s);if(i>0){c(I("Cannot Delete",`This clinic has ${i} assigned cards. Please reassign them first.`));return}if(confirm(`Are you sure you want to delete "${a.name}"? This action cannot be undone.`)){const l=await F.delete(s);c(l?v("Clinic Deleted",`${a.name} has been deleted`):g("Delete Failed","Could not delete clinic"))}},ns=async s=>{const a=new Date().toISOString(),i=await ps.create({cardControlNumber:s.cardControlNumber,clinicId:s.clinicId,patientName:s.patientName,patientEmail:s.patientEmail,patientPhone:s.patientPhone,preferredDate:s.preferredDate,preferredTime:s.preferredTime,status:"pending",serviceType:s.serviceType,notes:s.adminNotes,createdAt:a,updatedAt:a});_e(l=>[...l,i]),c(v("Manual Appointment Created","Appointment request sent to clinic for processing"))},is=s=>{const a=D.find(i=>i.controlNumber===s);a&&(G({fullName:a.fullName,status:a.status,perksTotal:a.perksTotal,perksUsed:a.perksUsed,clinicId:a.clinicId,expiryDate:a.expiryDate,notes:a.notes||""}),he(s))},cs=async s=>{const a=D.find(i=>i.controlNumber===s);if(a)try{const i={fullName:j.fullName,status:j.status,perksTotal:j.perksTotal,perksUsed:j.perksUsed,clinicId:j.clinicId,expiryDate:j.expiryDate,notes:j.notes,updatedAt:new Date().toISOString()};if(await hs.cards.update(a.id,i))he(null),c(v("Card Updated",`Updated ${s} successfully`)),await R();else throw new Error("Failed to save to database")}catch{c(g("Update Failed","Failed to update card"))}},ds=async s=>{if(window.confirm(`Are you sure you want to delete card ${s}? This action cannot be undone.`))try{await U.delete(s)?(c(v("Card Deleted",`Card ${s} has been deleted`)),await R()):c(g("Delete Failed","Could not delete card"))}catch{c(g("Delete Failed","Could not delete card"))}},os=[{id:"generator",label:"Generator",icon:ae,color:"emerald"},{id:"activation",label:"Activation",icon:Ns,color:"blue"},{id:"appointments",label:"Appointments",icon:ce,color:"rose"},{id:"clinic-management",label:"Manage Clinics",icon:qe,color:"indigo"},{id:"endorsement",label:"Endorsement",icon:Ue,color:"orange"},{id:"master-list",label:"Master List",icon:fe,color:"purple"},{id:"debug",label:"Debug DB",icon:re,color:"red"},{id:"settings",label:"Settings",icon:Re,color:"gray"}];if(!C)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"light-card p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"h-8 w-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Access Required"}),e.jsx("p",{className:"text-gray-600",children:"Please authenticate to continue"})]}),e.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{type:"text",value:p.username,onChange:s=>S({...p,username:s.target.value}),className:"light-input",placeholder:"Enter admin username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:p.password,onChange:s=>S({...p,password:s.target.value}),className:"light-input",placeholder:"Enter admin password",required:!0})]}),e.jsx("button",{type:"submit",className:"light-button-primary w-full",children:"Access Admin Portal"})]})]})});const ms=[{label:"Total Cards",value:D.length,icon:ve,color:"blue"},{label:"Active Clinics",value:L.length,icon:js,color:"green"},{label:"Active Cards",value:D.filter(s=>s.status==="active").length,icon:Ce,color:"emerald"},{label:"Pending Cards",value:D.filter(s=>s.status==="inactive").length,icon:re,color:"yellow"}];return Xe?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"light-card p-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading admin data..."})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-2xl flex items-center justify-center",children:e.jsx(be,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Control Room"}),e.jsx("p",{className:"text-gray-600",children:"MOCARDS System Administration"})]})]}),e.jsxs("button",{onClick:m,className:"light-button-secondary flex items-center space-x-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:ms.map((s,a)=>{const i=s.icon;return e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.value})]}),e.jsx("div",{className:`w-12 h-12 bg-${s.color}-100 rounded-2xl flex items-center justify-center`,children:e.jsx(i,{className:`h-6 w-6 text-${s.color}-600`})})]})},a)})}),e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl",children:os.map(s=>{const a=s.icon,i=N===s.id;return e.jsxs("button",{onClick:()=>K(s.id),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg transition-all duration-200 ${i?"light-tab-active":"light-tab"}`,children:[e.jsx(a,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.label})]},s.id)})})})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[N==="generator"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Card Generator"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:[1,50,100,250,500,1e3].map(s=>e.jsx("button",{onClick:()=>h({...n,quantity:s}),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${n.quantity===s?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s===1?"1 Card":`${s} Cards`},s))}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",min:"1",max:"10000",value:n.quantity,onChange:s=>h({...n,quantity:parseInt(s.target.value)||1}),className:"light-input w-32",placeholder:"Custom quantity"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Custom quantity (1-10000)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),e.jsxs("select",{value:n.region,onChange:s=>h({...n,region:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Region"}),se.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Code"}),e.jsxs("select",{value:n.areaCode,onChange:s=>h({...n,areaCode:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Area Code"}),Fe.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),n.areaCode==="Custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Area Code"}),e.jsx("input",{type:"text",value:n.customAreaCode,onChange:s=>h({...n,customAreaCode:s.target.value}),className:"light-input",placeholder:"Enter custom area code (e.g., XYZ001)"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perks per Card"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",min:"1",max:"20",value:n.perksTotal,onChange:s=>h({...n,perksTotal:parseInt(s.target.value)||1}),className:"light-input w-20"}),e.jsx("span",{className:"text-sm text-gray-600",children:"benefits/perks per card"}),e.jsxs("button",{onClick:()=>o({...r,showModal:!0}),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:from-blue-700 hover:to-indigo-700 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Manage Perks"})]})]}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Available Perks: "}),pe.filter(s=>s.isActive).length>0?e.jsx("span",{className:"text-green-600 font-medium",children:pe.filter(s=>s.isActive).map(s=>s.name).join(", ")}):e.jsx("span",{className:"text-orange-600",children:"No active perks configured"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:Ke,className:"light-button-primary",children:n.quantity===1?"Generate 1 Card":`Generate ${n.quantity} Cards`}),e.jsxs("button",{onClick:f,className:"light-button-secondary",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Test DB"]})]})]}),N==="activation"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Card Activation"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:u,onChange:s=>H(s.target.value),className:"light-input",placeholder:"Enter control number to activate"})}),e.jsxs("button",{onClick:as,className:"light-button-primary",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Search"]})]}),A&&e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:A.fullName}),e.jsx("p",{className:"text-gray-600",children:A.controlNumber})]}),e.jsx("span",{className:A.status==="active"?"status-active":"status-inactive",children:A.status})]}),e.jsxs("button",{onClick:ts,className:"light-button-primary",children:[A.status==="active"?"Deactivate":"Activate"," Card"]})]})]}),N==="clinic-management"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Manage Clinics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive clinic management with subscription plans and monitoring"})]}),e.jsxs("button",{onClick:()=>{M(!we),X(null),b({name:"",region:"",plan:"starter",areaCode:"",customAreaCode:"",address:"",adminClinic:"",email:"",contactNumber:"",password:"",username:""})},className:"light-button-primary flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Add New Clinic"]})]}),we&&e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:$?`Edit Clinic: ${$.name}`:"Add New Clinic"}),e.jsx("button",{onClick:()=>{M(!1),X(null)},className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Clinic Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.name,onChange:s=>b({...t,name:s.target.value}),className:"light-input",placeholder:"Enter clinic name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.username,onChange:s=>b({...t,username:s.target.value}),className:"light-input",placeholder:"Enter clinic username for login"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Region ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.region,onChange:s=>b({...t,region:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Region"}),se.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subscription Plan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.plan,onChange:s=>b({...t,plan:s.target.value}),className:"light-select",children:[e.jsxs("option",{value:"starter",children:["Starter Plan - ₱",J.starter,"/month (up to ",V.starter," cards)"]}),e.jsxs("option",{value:"growth",children:["Growth Plan - ₱",J.growth,"/month (up to ",V.growth," cards)"]}),e.jsxs("option",{value:"pro",children:["Pro Plan - ₱",J.pro,"/month (up to ",V.pro," cards)"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Area Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.areaCode,onChange:s=>b({...t,areaCode:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Area Code"}),Fe.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),t.areaCode==="Custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Area Code"}),e.jsx("input",{type:"text",value:t.customAreaCode,onChange:s=>b({...t,customAreaCode:s.target.value}),className:"light-input",placeholder:"Enter custom area code (e.g., XYZ001)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Clinic Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:t.password,onChange:s=>b({...t,password:s.target.value}),className:"light-input",placeholder:"Enter clinic login password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),e.jsx("input",{type:"text",value:t.address,onChange:s=>b({...t,address:s.target.value}),className:"light-input",placeholder:"Enter clinic address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Contact (Optional)"}),e.jsx("input",{type:"text",value:t.adminClinic,onChange:s=>b({...t,adminClinic:s.target.value}),className:"light-input",placeholder:"Enter admin contact name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>b({...t,email:s.target.value}),className:"light-input",placeholder:"Enter clinic email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number (Optional)"}),e.jsx("input",{type:"tel",value:t.contactNumber,onChange:s=>b({...t,contactNumber:s.target.value}),className:"light-input",placeholder:"+63917123456"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl mt-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Subscription Summary"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[t.plan.charAt(0).toUpperCase()+t.plan.slice(1)," Plan:"]})," ₱",J[t.plan]||0,"/month"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Card Limit:"})," Up to ",V[t.plan]||0," cards"]}),e.jsx("p",{className:"text-blue-600 mt-2",children:"* Required fields must be filled. Optional fields can be updated later."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{M(!1),X(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:$?De:rs,className:"light-button-primary",children:$?"Update Clinic":"Create Clinic Profile"})]})]})}),e.jsx("div",{className:"light-card",children:e.jsx("div",{className:"p-6",children:L.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(bs,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Clinics Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first clinic to the system"}),e.jsxs("button",{onClick:()=>M(!0),className:"light-button-primary flex items-center gap-2 mx-auto",children:[e.jsx(ae,{className:"h-4 w-4"}),"Add First Clinic"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Clinic Details"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Plan & Usage"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Contact Info"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:L.map(s=>{const a=D.filter(q=>q.clinicId===s.id),i=a.length,l=V[s.plan],y=i/l*100,Ie=se.find(q=>q.code===s.region)?.name||s.region;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600 font-mono",children:s.code}),e.jsx("div",{className:"text-sm text-gray-500",children:Ie})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.plan==="starter"?"bg-blue-100 text-blue-700":s.plan==="growth"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:s.plan.toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-600",children:["₱",J[s.plan],"/mo"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Card Usage"}),e.jsxs("span",{className:"font-medium",children:[i,"/",l]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${y>=90?"bg-red-500":y>=70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(y,100)}%`}})})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1 text-sm",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Le,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]}),s.contactNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Me,{className:"h-3 w-3"}),e.jsx("span",{children:s.contactNumber})]}),s.adminClinic&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(vs,{className:"h-3 w-3"}),e.jsx("span",{children:s.adminClinic})]}),!s.email&&!s.contactNumber&&!s.adminClinic&&e.jsx("span",{className:"text-gray-400 italic",children:"No contact info"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{Ee(s),M(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Edit clinic",children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Te(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Delete clinic",disabled:a.length>0,children:e.jsx(oe,{className:"h-4 w-4"})})]})})]},s.id)})})]})})})})]}),N==="appointments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Appointment Status Monitor"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View all appointment requests and their processing status"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsxs("span",{children:[O.length," total requests"]})]}),e.jsxs("button",{onClick:()=>ie(!0),className:"light-button-primary flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Create Manual Appointment"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:O.filter(s=>s.status==="pending").length})]}),e.jsx($e,{className:"h-8 w-8 text-orange-600"})]})}),e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:O.filter(s=>s.status==="pending").length})]}),e.jsx(Ue,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Accepted"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:O.filter(s=>s.status==="accepted").length})]}),e.jsx(Ce,{className:"h-8 w-8 text-emerald-600"})]})}),e.jsx("div",{className:"light-stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:O.filter(s=>s.status==="rejected").length})]}),e.jsx(re,{className:"h-8 w-8 text-red-600"})]})})]}),Ge&&e.jsxs("div",{className:"light-card p-6 border-l-4 border-blue-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Manual Appointment"})]}),e.jsx("button",{onClick:()=>ie(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Control Number *"}),e.jsx("input",{type:"text",value:x.cardControlNumber,onChange:s=>P({...x,cardControlNumber:s.target.value}),className:"light-input",placeholder:"MOC-00000-XX-XXX000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clinic *"}),e.jsxs("select",{value:x.clinicId,onChange:s=>P({...x,clinicId:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Clinic"}),L.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name *"}),e.jsx("input",{type:"text",value:x.patientName,onChange:s=>P({...x,patientName:s.target.value}),className:"light-input",placeholder:"Patient's full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:x.patientEmail,onChange:s=>P({...x,patientEmail:s.target.value}),className:"light-input",placeholder:"patient@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:x.patientPhone,onChange:s=>P({...x,patientPhone:s.target.value}),className:"light-input",placeholder:"+63917123456"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Type *"}),e.jsx("input",{type:"text",value:x.serviceType,onChange:s=>P({...x,serviceType:s.target.value}),className:"light-input",placeholder:"e.g., Dental Cleaning, Consultation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Date *"}),e.jsx("input",{type:"date",value:x.preferredDate,onChange:s=>P({...x,preferredDate:s.target.value}),min:new Date().toISOString().split("T")[0],className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Time *"}),e.jsx("input",{type:"time",value:x.preferredTime,onChange:s=>P({...x,preferredTime:s.target.value}),className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perk Requested"}),e.jsx("input",{type:"text",value:x.perkRequested,onChange:s=>P({...x,perkRequested:s.target.value}),className:"light-input",placeholder:"e.g., Free Dental Cleaning"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),e.jsx("textarea",{value:x.adminNotes,onChange:s=>P({...x,adminNotes:s.target.value}),rows:3,className:"light-input resize-none",placeholder:"Any additional notes or instructions..."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 mt-6",children:[e.jsxs("button",{onClick:()=>{if(!x.cardControlNumber||!x.patientName||!x.patientEmail||!x.preferredDate||!x.preferredTime||!x.serviceType||!x.clinicId){c(I("Missing Fields","Please fill in all required fields"));return}ns(x),P({cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"",perkRequested:"",clinicId:"",adminNotes:""}),ie(!1)},className:"light-button-primary flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Send to Clinic"]}),e.jsx("button",{onClick:()=>ie(!1),className:"light-button-secondary",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-4",children:O.length===0?e.jsxs("div",{className:"light-card p-8 text-center",children:[e.jsx(ce,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Appointment Requests"}),e.jsx("p",{className:"text-gray-600",children:"When cardholders request appointments, they will appear here."})]}):O.map(s=>e.jsx("div",{className:"light-card p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-[#1A535C]"}),e.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:s.cardControlNumber})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="pending"?"bg-orange-100 text-orange-700":s.status==="accepted"?"bg-emerald-100 text-emerald-700":s.status==="rejected"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:s.status.replace(/_/g," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.patientName}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx("span",{children:s.patientEmail})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:s.patientPhone})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(s.preferredDate).toLocaleDateString("en-PH")}),e.jsx($e,{className:"h-4 w-4 ml-2"}),e.jsx("span",{children:s.preferredTime})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Service:"})," ",s.serviceType]}),s.perkRequested&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Perk:"})," ",s.perkRequested]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Clinic:"})," ",s.clinicName]})]})})]}),s.adminNotes&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Admin Notes:"})," ",s.adminNotes]})}),s.clinicNotes&&e.jsx("div",{className:"bg-green-50 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Clinic Response:"})," ",s.clinicNotes]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Requested: ",new Date(s.requestedAt).toLocaleString("en-PH")]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[e.jsxs("div",{children:["Sent to Clinic: ",new Date(s.forwardedAt).toLocaleString("en-PH")]}),s.processedAt&&e.jsxs("div",{children:["Processed: ",new Date(s.processedAt).toLocaleString("en-PH")]})]})})]})},s.id))})]}),N==="endorsement"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Card Endorsement"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clinic"}),e.jsxs("select",{value:k.clinicId,onChange:s=>ne({...k,clinicId:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select Clinic"}),L.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.plan,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Range"}),e.jsx("input",{type:"text",value:k.startRange,onChange:s=>ne({...k,startRange:s.target.value}),className:"light-input",placeholder:"MOC-00001-NCR-CVT001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Range"}),e.jsx("input",{type:"text",value:k.endRange,onChange:s=>ne({...k,endRange:s.target.value}),className:"light-input",placeholder:"MOC-00100-NCR-CVT001"})]})]}),e.jsx("button",{onClick:ls,className:"light-button-primary",children:"Assign Cards to Clinic"})]}),N==="master-list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Data Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>ke("cards"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${z==="cards"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(ve,{className:"h-4 w-4 inline mr-2"}),"Cards"]}),e.jsxs("button",{onClick:()=>ke("clinics"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${z==="clinics"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(qe,{className:"h-4 w-4 inline mr-2"}),"Clinics"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ye,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:_,onChange:s=>He(s.target.value),placeholder:z==="cards"?"Search cards by name or control number...":"Search clinics by name or code...",className:"light-input pl-10"})]}),z==="cards"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ys,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:je,onChange:s=>ze(s.target.value),className:"light-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),z==="cards"&&e.jsx("div",{className:"light-table",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"light-table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4",children:"Control Number"}),e.jsx("th",{className:"text-left p-4",children:"Patient Name"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Clinic"}),e.jsx("th",{className:"text-left p-4",children:"Perks"}),e.jsx("th",{className:"text-left p-4",children:"Expiry"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:D.filter(s=>{const a=!_||s.fullName.toLowerCase().includes(_.toLowerCase())||s.controlNumber.toLowerCase().includes(_.toLowerCase()),i=je==="all"||s.status===je;return a&&i}).map(s=>{const a=L.find(l=>l.id===s.clinicId),i=Be===s.controlNumber;return e.jsxs("tr",{className:"light-table-row",children:[e.jsx("td",{className:"p-4 font-mono text-sm",children:s.controlNumber}),e.jsx("td",{className:"p-4",children:i?e.jsx("input",{type:"text",value:j.fullName,onChange:l=>G({...j,fullName:l.target.value}),className:"light-input text-sm"}):s.fullName}),e.jsx("td",{className:"p-4",children:i?e.jsxs("select",{value:j.status,onChange:l=>G({...j,status:l.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}):e.jsx("span",{className:s.status==="active"?"status-active":"status-inactive",children:s.status})}),e.jsx("td",{className:"p-4",children:i?e.jsxs("select",{value:j.clinicId,onChange:l=>G({...j,clinicId:l.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"",children:"Unassigned"}),L.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}):a?.name||"Unassigned"}),e.jsx("td",{className:"p-4",children:i?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",min:"0",value:j.perksUsed,onChange:l=>G({...j,perksUsed:parseInt(l.target.value)||0}),className:"light-input text-sm w-16"}),e.jsx("span",{className:"text-gray-500 self-center",children:"/"}),e.jsx("input",{type:"number",min:"1",value:j.perksTotal,onChange:l=>G({...j,perksTotal:parseInt(l.target.value)||1}),className:"light-input text-sm w-16"})]}):`${s.perksUsed}/${s.perksTotal}`}),e.jsx("td",{className:"p-4",children:i?e.jsx("input",{type:"date",value:j.expiryDate,onChange:l=>G({...j,expiryDate:l.target.value}),className:"light-input text-sm"}):new Date(s.expiryDate).toLocaleDateString()}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>cs(s.controlNumber),className:"p-1 text-green-600 hover:text-green-700",title:"Save changes",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>he(null),className:"p-1 text-gray-600 hover:text-gray-700",title:"Cancel",children:e.jsx(te,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>is(s.controlNumber),className:"p-1 text-blue-600 hover:text-blue-700",title:"Edit card",children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ds(s.controlNumber),className:"p-1 text-red-600 hover:text-red-700",title:"Delete card",children:e.jsx(oe,{className:"h-4 w-4"})})]})})})]},s.controlNumber)})})]})}),z==="clinics"&&e.jsx("div",{className:"light-table",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"light-table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Code"}),e.jsx("th",{className:"text-left p-4",children:"Region"}),e.jsx("th",{className:"text-left p-4",children:"Plan"}),e.jsx("th",{className:"text-left p-4",children:"Cards"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:L.filter(s=>!_||s.name.toLowerCase().includes(_.toLowerCase())||s.code.toLowerCase().includes(_.toLowerCase())).map(s=>{const a=$?.id===s.id,i=D.filter(l=>l.clinicId===s.id);return e.jsxs("tr",{className:"light-table-row",children:[e.jsx("td",{className:"p-4",children:a?e.jsx("input",{type:"text",value:T.name,onChange:l=>ee({...T,name:l.target.value}),className:"light-input text-sm"}):e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.address})]})}),e.jsx("td",{className:"p-4 font-mono text-sm",children:s.code}),e.jsx("td",{className:"p-4",children:a?e.jsxs("select",{value:T.region,onChange:l=>ee({...T,region:l.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"",children:"Select Region"}),se.map(l=>e.jsx("option",{value:l.code,children:l.name},l.code))]}):se.find(l=>l.code===s.region)?.name||s.region}),e.jsx("td",{className:"p-4",children:a?e.jsxs("select",{value:T.plan,onChange:l=>ee({...T,plan:l.target.value}),className:"light-select text-sm",children:[e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"pro",children:"Pro"})]}):e.jsx("span",{className:`plan-${s.plan} capitalize`,children:s.plan})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[i.length," / ",s.maxCards]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-blue-500 h-1 rounded-full",style:{width:`${Math.min(i.length/s.maxCards*100,100)}%`}})})]})}),e.jsx("td",{className:"p-4",children:a?e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{type:"email",value:T.email,onChange:l=>ee({...T,email:l.target.value}),placeholder:"Email",className:"light-input text-sm"}),e.jsx("input",{type:"text",value:T.contactNumber,onChange:l=>ee({...T,contactNumber:l.target.value}),placeholder:"Phone",className:"light-input text-sm"})]}):e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.email}),e.jsx("div",{className:"text-gray-500",children:s.contactNumber})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:s.isActive?"status-active":"status-inactive",children:s.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>De(),className:"p-1 text-green-600 hover:text-green-700",title:"Save changes",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>X(null),className:"p-1 text-gray-600 hover:text-gray-700",title:"Cancel",children:e.jsx(te,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Ee(s),className:"p-1 text-blue-600 hover:text-blue-700",title:"Edit clinic",children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Je(Ne===s.id?null:s.id),className:"p-1 text-amber-600 hover:text-amber-700",title:"Show/Hide Credentials (Emergency Access)",children:Ne===s.id?e.jsx(Cs,{className:"h-4 w-4"}):e.jsx(ws,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Te(s.id),className:"p-1 text-red-600 hover:text-red-700",title:"Delete clinic",children:e.jsx(oe,{className:"h-4 w-4"})})]})}),Ne===s.id&&e.jsxs("div",{className:"mt-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(be,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-semibold text-amber-800",children:"Emergency Credentials"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Clinic Code:"}),e.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded border text-gray-900",children:s.code})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded border text-gray-900",children:s.password})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-amber-100 rounded text-xs text-amber-800",children:["⚠️ ",e.jsx("strong",{children:"Emergency Use Only:"})," Only provide these credentials to clinic staff who have forgotten their login details. Keep this information secure."]})]})]})]},s.id)})})]})})]}),N==="debug"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(re,{className:"h-6 w-6 text-red-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Database Debugger"})]}),e.jsx("p",{className:"text-gray-600",children:"Use this tool to analyze the database and troubleshoot card lookup issues."}),e.jsx(Ss,{})]}),N==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Password Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Change your admin password for security"})]}),e.jsx("button",{onClick:()=>me(!Ae),className:"light-button-primary",children:"Change Password"})]}),Ae&&e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("form",{onSubmit:Qe,className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",value:E.currentPassword,onChange:s=>Z({...E,currentPassword:s.target.value}),className:"light-input",placeholder:"Enter current password",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:E.newPassword,onChange:s=>Z({...E,newPassword:s.target.value}),className:"light-input",placeholder:"Enter new password (min 8 characters)",minLength:8,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:E.confirmPassword,onChange:s=>Z({...E,confirmPassword:s.target.value}),className:"light-input",placeholder:"Confirm new password",required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"light-button-primary",children:"Update Password"}),e.jsx("button",{type:"button",onClick:()=>{me(!1),Z({currentPassword:"",newPassword:"",confirmPassword:""})},className:"light-button-secondary",children:"Cancel"})]})]})})]})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Version:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"MOCARDS v3.0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Environment:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Production"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Last Login:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date().toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Admin Username:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:xe.username})]})]})]})})]})]})}),r.showModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.editingPerk?"Edit Perk":"Create New Perk"}),e.jsx("button",{onClick:()=>o({...r,showModal:!1}),className:"text-gray-500 hover:text-gray-700",children:e.jsx(te,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),We()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("select",{value:r.form.type,onChange:s=>o({...r,form:{...r.form,type:s.target.value}}),className:"light-select",children:ss.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:r.form.name,onChange:s=>o({...r,form:{...r.form,name:s.target.value}}),className:"light-input",placeholder:"e.g., Free Dental Cleaning",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:r.form.description,onChange:s=>o({...r,form:{...r.form,description:s.target.value}}),className:"light-input",placeholder:"Describe this perk...",rows:3,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value (₱ PHP)"}),e.jsx("input",{type:"number",min:"0",max:"10000",value:r.form.value,onChange:s=>o({...r,form:{...r.form,value:parseInt(s.target.value)||0}}),className:"light-input",placeholder:"800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Days"}),e.jsx("input",{type:"number",min:"1",value:r.form.validFor,onChange:s=>o({...r,form:{...r.form,validFor:parseInt(s.target.value)||365}}),className:"light-input",placeholder:"365"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.form.isActive,onChange:s=>o({...r,form:{...r.form,isActive:s.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.form.requiresApproval,onChange:s=>o({...r,form:{...r.form,requiresApproval:s.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Requires Approval"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"submit",className:"light-button-primary",children:r.editingPerk?"Update":"Create"}),e.jsx("button",{type:"button",onClick:()=>o({...r,showModal:!1}),className:"light-button-secondary",children:"Cancel"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Existing Perks"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:pe.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("span",{className:`ml-2 text-xs px-2 py-1 rounded ${s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>Ze(s),className:"text-blue-600 hover:text-blue-800",children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>es(s),className:"text-red-600 hover:text-red-800",children:e.jsx(oe,{className:"h-4 w-4"})})]})]},s.id))})]})]})})]})}export{Rs as AdminPortalView};
