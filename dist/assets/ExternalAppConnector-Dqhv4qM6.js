import{u as E,j as e,a as o,b as g,t as k}from"./index-CviiDmju.js";import{r as i}from"./charts-sad3owxz.js";import{E as I,g as y,f as P,h as T,K as G,i as K,e as O,W as R,j as _}from"./icons-VgLpK0Xg.js";import"./vendor-N--QU9DW.js";function B(){const[d,p]=i.useState([]),[t,c]=i.useState({name:"",url:"",apiKey:""}),[j,m]=i.useState(!1),[h,u]=i.useState(null),{addToast:r}=E();i.useEffect(()=>{const s=localStorage.getItem("mocards_external_apps");s&&p(JSON.parse(s))},[]);const x=s=>{p(s),localStorage.setItem("mocards_external_apps",JSON.stringify(s))},b=async()=>{if(!t.name.trim()||!t.url.trim()){r(k("Missing Information","Please provide app name and URL"));return}const s={id:`app_${Date.now()}`,name:t.name.trim(),url:t.url.trim(),apiKey:t.apiKey.trim(),status:"disconnected"},a=[...d,s];x(a),c({name:"",url:"",apiKey:""}),m(!1),r(o("App Added",`${s.name} has been added successfully`))},f=async s=>{u(s);try{const a=d.find(n=>n.id===s);if(!a)return;await new Promise(n=>setTimeout(n,1500));const l=Math.random()>.3,S=d.map(n=>n.id===s?{...n,status:l?"connected":"error",lastSync:l?new Date().toISOString():void 0}:n);x(S),r(l?o("Connection Successful",`Connected to ${a.name}`):g("Connection Failed",`Could not connect to ${a.name}`))}catch(a){console.error("Connection test failed:",a),r(g("Test Failed","Failed to test connection"))}finally{u(null)}},N=s=>{const a=d.filter(l=>l.id!==s);x(a),r(o("App Removed","External app has been removed"))},v=s=>{switch(s){case"connected":return e.jsx(_,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(R,{className:"h-5 w-5 text-red-500"});default:return e.jsx(y,{className:"h-5 w-5 text-gray-400"})}},w=s=>{switch(s){case"connected":return"bg-green-100 text-green-800 border-green-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},A=()=>{const s=`${window.location.origin}/api/v1/cards`;navigator.clipboard.writeText(s),r(o("Copied","API endpoint copied to clipboard"))},C=[{name:"Search Card",method:"GET",endpoint:"/api/v1/cards/search?q={card_number}",description:"Search for a card by control number"},{name:"Get Card Details",method:"GET",endpoint:"/api/v1/cards/{card_id}",description:"Get detailed information about a specific card"},{name:"Generate Cards",method:"POST",endpoint:"/api/v1/cards/generate",description:"Generate new cards (requires API key)"},{name:"Bulk Export",method:"GET",endpoint:"/api/v1/cards/export",description:"Export card data in various formats"}];return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(I,{className:"h-10 w-10 text-emerald-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"External App Connector"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Connect to external applications and share card data via API"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Connected Apps"}),e.jsx("button",{onClick:()=>m(!0),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-medium hover:bg-emerald-700 transition-all",children:"Add App"})]}),d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No external apps connected"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Add an app to start sharing card data"})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:bg-gray-50 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[v(s.status),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.url}),s.lastSync&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Last sync: ",new Date(s.lastSync).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${w(s.status)}`,children:s.status}),e.jsx("button",{onClick:()=>f(s.id),disabled:h===s.id,className:"text-emerald-600 hover:text-emerald-700 p-1",children:h===s.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-emerald-300 border-t-emerald-600"}):e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(s.id),className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(T,{className:"h-4 w-4"})})]})]})},s.id))})]}),j&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add External App"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"App Name"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>c({...t,name:s.target.value}),placeholder:"e.g., Clinic Management System",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"App URL"}),e.jsx("input",{type:"url",value:t.url,onChange:s=>c({...t,url:s.target.value}),placeholder:"https://your-app.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key (Optional)"}),e.jsx("input",{type:"password",value:t.apiKey,onChange:s=>c({...t,apiKey:s.target.value}),placeholder:"Enter API key for authentication",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:b,className:"flex-1 bg-emerald-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-emerald-700",children:"Add App"}),e.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-300",children:"Cancel"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(G,{className:"h-6 w-6 mr-3 text-emerald-600"}),"API Endpoints"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Base URL"}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("code",{className:"flex-1 font-mono text-sm",children:[window.location.origin,"/api/v1"]}),e.jsx("button",{onClick:A,className:"text-emerald-600 hover:text-emerald-700",children:e.jsx(K,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"space-y-4",children:C.map((s,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${s.method==="GET"?"bg-green-100 text-green-800":s.method==="POST"?"bg-blue-100 text-blue-800":s.method==="PUT"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.method})]}),e.jsx("code",{className:"block text-sm bg-gray-50 p-2 rounded mb-2 font-mono",children:s.endpoint}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]},a))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(O,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Integration Guide"]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-900",children:"1. Authentication:"}),e.jsxs("p",{children:["Include your API key in the Authorization header: ",e.jsx("code",{children:"Bearer YOUR_API_KEY"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-900",children:"2. Rate Limits:"}),e.jsx("p",{children:"API is limited to 100 requests per minute per API key"})]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-900",children:"3. Response Format:"}),e.jsx("p",{children:"All responses are in JSON format with standard HTTP status codes"})]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-900",children:"4. Webhooks:"}),e.jsx("p",{children:"Configure webhook URLs to receive real-time updates when cards are created or modified"})]})]})]})]})]})]})}export{B as ExternalAppConnector};
