import{u as y,j as e,t as w,a as b,b as C}from"./index-CviiDmju.js";import{r as i}from"./charts-sad3owxz.js";import{b as v,e as S,H as G,Z as $,f as D}from"./icons-VgLpK0Xg.js";import"./vendor-N--QU9DW.js";function O(){const[r,m]=i.useState(1),[n,x]=i.useState("MOC"),[u,p]=i.useState(!1),[a,h]=i.useState(null),{addToast:c}=y(),g=t=>{const l=Date.now(),o=Math.random().toString(36).substring(2,8).toUpperCase(),s=(t+1).toString().padStart(4,"0");return`${n}-${l}-${s}-${o}`},f=async()=>{if(r<1||r>1e4){c(w("Invalid Quantity","Please enter a quantity between 1 and 10000"));return}p(!0),h(null);try{const t=`BATCH_${Date.now()}`,l=[];for(let s=0;s<r;s++){const d=g(s);l.push({id:`card_${Date.now()}_${s}`,controlNumber:d,status:"generated"}),s>0&&s%100===0&&await new Promise(N=>setTimeout(N,10))}await new Promise(s=>setTimeout(s,500)),h({success:!0,count:r,cards:l,batchId:t}),c(b("Cards Generated",`Successfully generated ${r} card(s)`))}catch(t){console.error("Generation failed:",t),c(C("Generation Failed","Failed to generate cards"))}finally{p(!1)}},j=()=>{if(!a)return;const t=["Card ID,Control Number,Status,Generated At",...a.cards.map(d=>`${d.id},${d.controlNumber},${d.status},${new Date().toISOString()}`)].join(`
`),l=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(l),s=document.createElement("a");s.href=o,s.download=`mocards_batch_${a.batchId}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(o),c(b("Download Started","Card batch exported successfully"))};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(v,{className:"h-10 w-10 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Card Generator"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Generate unique MOC card control numbers and manage card batches"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(S,{className:"h-6 w-6 mr-3 text-purple-600"}),"Generation Settings"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quantity"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[1,10,100,1e3].map(t=>e.jsxs("button",{onClick:()=>m(t),className:`p-3 rounded-xl border-2 font-medium transition-all ${r===t?"border-purple-600 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300 text-gray-700"}`,children:[t," Card",t>1?"s":""]},t))}),e.jsx("input",{type:"number",min:"1",max:"10000",placeholder:"Custom quantity (1-10000)",value:[1,10,100,1e3].includes(r)?"":r,onChange:t=>m(parseInt(t.target.value)||1),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Control Number Prefix"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4",children:["MOC","CARD","MCN"].map(t=>e.jsx("button",{onClick:()=>x(t),className:`p-3 rounded-xl border-2 font-medium transition-all ${n===t?"border-purple-600 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300 text-gray-700"}`,children:t},t))}),e.jsx("input",{type:"text",placeholder:"Custom prefix",value:["MOC","CARD","MCN"].includes(n)?"":n,onChange:t=>x(t.target.value.toUpperCase()||"MOC"),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-2 text-purple-600"}),"Control Number Preview"]}),e.jsxs("p",{className:"font-mono text-lg text-purple-700",children:[n,"-",Date.now(),"-0001-ABC123"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Format: ",n,"-TIMESTAMP-SEQUENCE-RANDOM"]})]}),e.jsx("button",{onClick:f,disabled:u,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-4 rounded-xl font-bold text-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-3 inline-block"}),"Generating ",r," cards..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-5 w-5 mr-3 inline-block"}),"Generate ",r," Card",r>1?"s":""]})})]})]}),a&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[e.jsx(D,{className:"h-6 w-6 mr-2"}),"Generation Complete"]}),e.jsxs("p",{className:"text-green-100",children:["Successfully generated ",a.count," cards"]})]}),e.jsx("button",{onClick:j,className:"bg-white text-green-600 px-4 py-2 rounded-xl font-semibold hover:bg-gray-100 transition-all",children:"Download CSV"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.count}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cards Generated"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.cards.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ready to Use"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-mono text-purple-600",children:a.batchId}),e.jsx("p",{className:"text-sm text-gray-600",children:"Batch ID"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 max-h-60 overflow-y-auto",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Generated Cards Preview"}),e.jsxs("div",{className:"space-y-2",children:[a.cards.slice(0,10).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"font-mono text-sm",children:t.controlNumber}),e.jsx("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full",children:t.status})]},t.id)),a.cards.length>10&&e.jsxs("div",{className:"text-center py-2 text-gray-500 text-sm",children:["... and ",a.cards.length-10," more cards"]})]})]})]})]})]})}export{O as PureCardGenerator};
