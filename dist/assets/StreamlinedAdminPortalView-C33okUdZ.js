import{c as z,u as B,j as e,a as u,b as m,t as f}from"./index-BYwebZkp.js";import{r as d}from"./charts-sad3owxz.js";import{c as w,b as A,a as $}from"./data-_aU9vntM.js";import{b as P,e as U,f as W,i as Q,B as H,d as J,k as N,l as K,m as Y,T as Z,n as F}from"./icons-BldG30mL.js";import"./vendor-N--QU9DW.js";import"./database-BUiByx9r.js";import"./supabase-BYaNx0mI.js";function ie(){const{isAuthenticated:b,login:E,logout:X}=z(),[x,k]=d.useState({username:"",password:""}),[p,D]=d.useState("cards"),[S,T]=d.useState([]),[c,v]=d.useState([]),[n,g]=d.useState({quantity:100,region:"4A",areaCode:"CVT001"}),[h,y]=d.useState([]),[t,o]=d.useState({name:"",code:"",region:"4A",address:"",phone:"",email:""}),[a,i]=d.useState({clinicId:"",cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"General Checkup",notes:""}),{addToast:l}=B();d.useEffect(()=>{b&&C()},[b]);const C=async()=>{try{const[s,r]=await Promise.all([w.getAll(),A.getAll()]);T(s),y(r)}catch(s){console.error("Failed to load data:",s)}},q=async s=>{s.preventDefault(),x.username==="admin"&&x.password==="admin123"?(E("admin",{id:"admin",username:"admin",type:"admin"}),l(u("Welcome","Logged in as Administrator"))):l(m("Login Failed","Invalid admin credentials"))},I=async()=>{try{const s=await w.generateCards(n.quantity,n.region,n.areaCode,5);T([...S,...s]),l(u("Cards Generated",`Successfully generated ${s.length} cards`)),g({quantity:100,region:"4A",areaCode:"CVT001"}),C()}catch(s){l(m("Generation Failed","Failed to generate cards")),console.error("Card generation error:",s)}},G=async s=>{if(c.length===0){l(f("No Cards Selected","Please select cards to assign"));return}try{await w.assignToClinic(c,s)?(l(u("Cards Assigned",`Assigned ${c.length} cards to clinic`)),v([]),C()):l(m("Assignment Failed","Failed to assign cards to clinic"))}catch{l(m("Assignment Error","Error assigning cards"))}},L=async()=>{if(!t.name||!t.code){l(f("Missing Information","Please fill in clinic name and code"));return}try{const s=await A.create({...t,username:t.code.toLowerCase(),plan:"starter",subscriptionPrice:999,password:"clinic123"});y([...h,s]),l(u("Clinic Created","New clinic created successfully")),o({name:"",code:"",region:"4A",address:"",phone:"",email:""})}catch{l(m("Creation Failed","Failed to create clinic"))}},R=async s=>{if(confirm("Are you sure you want to delete this clinic?"))try{await A.delete(s),y(h.filter(r=>r.id!==s)),l(u("Clinic Deleted","Clinic deleted successfully"))}catch{l(m("Delete Failed","Failed to delete clinic"))}},V=async()=>{if(!a.clinicId||!a.patientName){l(f("Missing Information","Please fill in clinic and patient name"));return}try{await $.create({...a,createdAt:new Date().toISOString(),status:"pending"}),l(u("Appointment Sent","Appointment request forwarded to clinic")),i({clinicId:"",cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"General Checkup",notes:""})}catch{l(m("Send Failed","Failed to send appointment request"))}};if(!b)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"light-card p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(P,{className:"h-8 w-8 text-purple-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Portal"}),e.jsx("p",{className:"text-gray-600",children:"Enter admin credentials to access system"})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{type:"text",value:x.username,onChange:s=>k({...x,username:s.target.value}),className:"light-input",placeholder:"Enter admin username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:x.password,onChange:s=>k({...x,password:s.target.value}),className:"light-input",placeholder:"Enter admin password",required:!0})]}),e.jsxs("button",{type:"submit",className:"light-button-primary w-full flex items-center justify-center",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Access Admin Portal"]})]})]})});const M=[{id:"cards",name:"Manage Cards",icon:Q},{id:"clinics",name:"Manage Clinics",icon:H},{id:"appointments",name:"Send Appointments",icon:J}],j=S.filter(s=>!s.clinicId);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center",children:e.jsx(P,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Portal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"System Administration Dashboard"})]})]}),e.jsxs("button",{onClick:X,className:"light-button-secondary flex items-center space-x-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"flex space-x-2",children:M.map(s=>{const r=s.icon;return e.jsxs("button",{onClick:()=>D(s.id),className:`flex items-center space-x-2 px-4 py-3 rounded-xl font-medium transition-colors ${p===s.id?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(r,{className:"h-4 w-4"}),e.jsx("span",{children:s.name})]},s.id)})})})}),p==="cards"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-blue-600"}),"Generate New Cards"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:n.quantity,onChange:s=>g({...n,quantity:parseInt(s.target.value)||1}),className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),e.jsxs("select",{value:n.region,onChange:s=>g({...n,region:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"4A",children:"Calabarzon (4A)"}),e.jsx("option",{value:"NCR",children:"National Capital Region"}),e.jsx("option",{value:"03",children:"Central Luzon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Code"}),e.jsxs("select",{value:n.areaCode,onChange:s=>g({...n,areaCode:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"CVT001",children:"CVT001"}),e.jsx("option",{value:"CVT002",children:"CVT002"}),e.jsx("option",{value:"BTG001",children:"BTG001"})]})]})]}),e.jsxs("button",{onClick:I,className:"light-button-primary",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Generate ",n.quantity," Cards"]})]})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(K,{className:"h-5 w-5 mr-2 text-green-600"}),"Assign Cards to Clinics (",c.length," selected)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Cards"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm",children:[c.length," of ",j.length," unassigned cards selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign to Clinic"}),e.jsx("div",{className:"flex space-x-2",children:h.map(s=>e.jsx("button",{onClick:()=>G(s.id),disabled:c.length===0,className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:opacity-50 text-sm",children:s.name},s.id))})]})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1",children:j.slice(0,50).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:c.includes(s.controlNumber),onChange:r=>{r.target.checked?v([...c,s.controlNumber]):v(c.filter(O=>O!==s.controlNumber))},className:"rounded"}),e.jsx("span",{className:"font-mono text-sm",children:s.controlNumber})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status})]},s.id))}),j.length>50&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Showing first 50 of ",j.length," unassigned cards"]})]})})]}),p==="clinics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-blue-600"}),"Create New Clinic"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clinic Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>o({...t,name:s.target.value}),className:"light-input",placeholder:"Enter clinic name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clinic Code *"}),e.jsx("input",{type:"text",value:t.code,onChange:s=>o({...t,code:s.target.value.toUpperCase()}),className:"light-input",placeholder:"e.g., CLINIC001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),e.jsxs("select",{value:t.region,onChange:s=>o({...t,region:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"4A",children:"Calabarzon (4A)"}),e.jsx("option",{value:"NCR",children:"National Capital Region"}),e.jsx("option",{value:"03",children:"Central Luzon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>o({...t,phone:s.target.value}),className:"light-input",placeholder:"+63 XXX XXX XXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>o({...t,email:s.target.value}),className:"light-input",placeholder:"clinic@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:t.address,onChange:s=>o({...t,address:s.target.value}),className:"light-input",placeholder:"Complete address"})]})]}),e.jsxs("button",{onClick:L,className:"light-button-primary",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Create Clinic"]})]})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["All Clinics (",h.length,")"]}),e.jsx("div",{className:"space-y-3",children:h.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.code," • ",s.region]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.address}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.phone," • ",s.email]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>console.log("Edit clinic:",s.id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(s.id),className:"p-2 text-red-600 hover:bg-red-100 rounded",children:e.jsx(Z,{className:"h-4 w-4"})})]})]})},s.id))})]})})]}),p==="appointments"&&e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(F,{className:"h-5 w-5 mr-2 text-green-600"}),"Forward Appointment Request to Clinic"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Clinic *"}),e.jsxs("select",{value:a.clinicId,onChange:s=>i({...a,clinicId:s.target.value}),className:"light-select",required:!0,children:[e.jsx("option",{value:"",children:"Choose a clinic..."}),h.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),e.jsx("input",{type:"text",value:a.cardControlNumber,onChange:s=>i({...a,cardControlNumber:s.target.value}),className:"light-input",placeholder:"MOC-12345-4A-CVT001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name *"}),e.jsx("input",{type:"text",value:a.patientName,onChange:s=>i({...a,patientName:s.target.value}),className:"light-input",placeholder:"Enter patient name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Email"}),e.jsx("input",{type:"email",value:a.patientEmail,onChange:s=>i({...a,patientEmail:s.target.value}),className:"light-input",placeholder:"patient@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Phone"}),e.jsx("input",{type:"tel",value:a.patientPhone,onChange:s=>i({...a,patientPhone:s.target.value}),className:"light-input",placeholder:"+63 XXX XXX XXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Type"}),e.jsxs("select",{value:a.serviceType,onChange:s=>i({...a,serviceType:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"General Checkup",children:"General Checkup"}),e.jsx("option",{value:"Dental Cleaning",children:"Dental Cleaning"}),e.jsx("option",{value:"Consultation",children:"Consultation"}),e.jsx("option",{value:"Treatment",children:"Treatment"}),e.jsx("option",{value:"Emergency",children:"Emergency"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Date"}),e.jsx("input",{type:"date",value:a.preferredDate,onChange:s=>i({...a,preferredDate:s.target.value}),className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Time"}),e.jsx("input",{type:"time",value:a.preferredTime,onChange:s=>i({...a,preferredTime:s.target.value}),className:"light-input"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:a.notes,onChange:s=>i({...a,notes:s.target.value}),className:"light-input",rows:3,placeholder:"Additional notes or instructions for the clinic..."})]})]}),e.jsxs("button",{onClick:V,className:"light-button-primary",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Send Appointment Request"]})]})})]})}export{ie as StreamlinedAdminPortalView};
