import{c as R,u as O,f as N,g as $,j as e,a as h,b as o,t as w,e as M}from"./index-_Qz0svUm.js";import{r as i}from"./charts-sad3owxz.js";import{S as A,q as U,r as z,u as B,s as W,v as S,U as k,w as T}from"./icons-79JrDgB8.js";import"./vendor-N--QU9DW.js";import"./database-BUiByx9r.js";function Z(){const{isAuthenticated:u,login:P,logout:q}=R(),[c,v]=i.useState({username:"",password:""}),[p,E]=i.useState("cards"),[g,b]=i.useState([]),[l,m]=i.useState({quantity:1,region:"4A",areaCode:"CVT001"}),[y,F]=i.useState([]),[r,j]=i.useState([]),[x,f]=i.useState(""),[t,n]=i.useState({clinicId:"",cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"",notes:""}),{addToast:a}=O();i.useEffect(()=>{u&&C()},[u]);const C=async()=>{try{const[s,d]=await Promise.all([N.getAll(),$.getAll()]);b(s),F(d)}catch(s){console.error("Failed to load data:",s)}},D=async s=>{s.preventDefault(),c.username==="admin"&&c.password==="admin123"?(P("admin",{id:"admin",username:"admin",type:"admin"}),a(h("Welcome","Logged in as Administrator"))):a(o("Login Failed","Invalid admin credentials"))},I=async()=>{try{const s=await N.generateCards(l.quantity,l.region,l.areaCode);b([...g,...s]),a(h("Cards Generated",`Successfully generated ${s.length} cards`)),m({quantity:1,region:"4A",areaCode:"CVT001"})}catch{a(o("Generation Failed","Failed to generate cards"))}},X=async()=>{if(r.length===0||!x){a(w("Assignment Error","Please select cards and a clinic"));return}try{await N.assignToClinic(r,x)?(a(h("Cards Assigned",`Assigned ${r.length} cards to clinic`)),j([]),f(""),C()):a(o("Assignment Failed","Failed to assign cards to clinic"))}catch{a(o("Assignment Error","Error assigning cards"))}},L=async()=>{if(!t.clinicId||!t.patientName){a(w("Missing Info","Please fill in required fields"));return}try{await M.create({...t,createdAt:new Date().toISOString(),status:"pending"}),a(h("Appointment Sent","Appointment request sent to clinic")),n({clinicId:"",cardControlNumber:"",patientName:"",patientEmail:"",patientPhone:"",preferredDate:"",preferredTime:"",serviceType:"",notes:""})}catch{a(o("Send Failed","Failed to send appointment request"))}};if(!u)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"light-card p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"h-8 w-8 text-purple-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Portal"}),e.jsx("p",{className:"text-gray-600",children:"Please authenticate with your admin credentials"})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{type:"text",value:c.username,onChange:s=>v({...c,username:s.target.value}),className:"light-input",placeholder:"Enter admin username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:c.password,onChange:s=>v({...c,password:s.target.value}),className:"light-input",placeholder:"Enter admin password",required:!0})]}),e.jsxs("button",{type:"submit",className:"light-button-primary w-full flex items-center justify-center",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Access Admin Portal"]})]})]})});const V=[{id:"cards",name:"Manage Cards",icon:B},{id:"appointments",name:"Send Appointments",icon:W}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center",children:e.jsx(A,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Portal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"System Administration"})]})]}),e.jsxs("button",{onClick:q,className:"light-button-secondary flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"light-card mb-6",children:e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"flex space-x-2",children:V.map(s=>{const d=s.icon;return e.jsxs("button",{onClick:()=>E(s.id),className:`flex items-center space-x-2 px-4 py-3 rounded-xl font-medium transition-colors ${p===s.id?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(d,{className:"h-4 w-4"}),e.jsx("span",{children:s.name})]},s.id)})})})}),p==="cards"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),"Generate Cards"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:l.quantity,onChange:s=>m({...l,quantity:parseInt(s.target.value)||1}),className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),e.jsxs("select",{value:l.region,onChange:s=>m({...l,region:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"4A",children:"Calabarzon (4A)"}),e.jsx("option",{value:"NCR",children:"National Capital Region"}),e.jsx("option",{value:"03",children:"Central Luzon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area Code"}),e.jsxs("select",{value:l.areaCode,onChange:s=>m({...l,areaCode:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"CVT001",children:"CVT001"}),e.jsx("option",{value:"CVT002",children:"CVT002"}),e.jsx("option",{value:"BTG001",children:"BTG001"})]})]})]}),e.jsxs("button",{onClick:I,className:"light-button-primary",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Generate ",l.quantity," Cards"]})]})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),"Assign Cards to Clinic"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Clinic"}),e.jsxs("select",{value:x,onChange:s=>f(s.target.value),className:"light-select",children:[e.jsx("option",{value:"",children:"Choose a clinic..."}),y.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cards Selected"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.length," cards selected"]})]})]}),e.jsxs("button",{onClick:X,disabled:r.length===0||!x,className:"light-button-primary disabled:opacity-50",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Assign Selected Cards"]})]})}),e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["All Cards (",g.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:g.filter(s=>!s.clinicId).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:r.includes(s.controlNumber),onChange:d=>{d.target.checked?j([...r,s.controlNumber]):j(r.filter(G=>G!==s.controlNumber))},className:"rounded"}),e.jsx("span",{className:"font-mono text-sm",children:s.controlNumber})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status})]},s.id))})]})})]}),p==="appointments"&&e.jsx("div",{className:"light-card",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2"}),"Send Appointment Request to Clinic"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Clinic *"}),e.jsxs("select",{value:t.clinicId,onChange:s=>n({...t,clinicId:s.target.value}),className:"light-select",required:!0,children:[e.jsx("option",{value:"",children:"Choose a clinic..."}),y.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),e.jsx("input",{type:"text",value:t.cardControlNumber,onChange:s=>n({...t,cardControlNumber:s.target.value}),className:"light-input",placeholder:"MOC-12345-4A-CVT001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name *"}),e.jsx("input",{type:"text",value:t.patientName,onChange:s=>n({...t,patientName:s.target.value}),className:"light-input",placeholder:"Enter patient name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Email"}),e.jsx("input",{type:"email",value:t.patientEmail,onChange:s=>n({...t,patientEmail:s.target.value}),className:"light-input",placeholder:"patient@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Phone"}),e.jsx("input",{type:"tel",value:t.patientPhone,onChange:s=>n({...t,patientPhone:s.target.value}),className:"light-input",placeholder:"+63 XXX XXX XXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Type"}),e.jsxs("select",{value:t.serviceType,onChange:s=>n({...t,serviceType:s.target.value}),className:"light-select",children:[e.jsx("option",{value:"",children:"Select service..."}),e.jsx("option",{value:"Dental Cleaning",children:"Dental Cleaning"}),e.jsx("option",{value:"Consultation",children:"Consultation"}),e.jsx("option",{value:"Check-up",children:"Check-up"}),e.jsx("option",{value:"Treatment",children:"Treatment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Date"}),e.jsx("input",{type:"date",value:t.preferredDate,onChange:s=>n({...t,preferredDate:s.target.value}),className:"light-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Time"}),e.jsx("input",{type:"time",value:t.preferredTime,onChange:s=>n({...t,preferredTime:s.target.value}),className:"light-input"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:t.notes,onChange:s=>n({...t,notes:s.target.value}),className:"light-input",rows:3,placeholder:"Additional notes for the clinic..."})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:L,className:"light-button-primary",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Send Appointment Request"]})})]})})]})}export{Z as SimpleAdminPortalView};
